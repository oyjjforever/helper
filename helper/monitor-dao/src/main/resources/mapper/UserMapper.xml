<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.bosssoft.monitor.dao.UserMapper">
    <resultMap id="BaseResultMap" type="com.bosssoft.monitor.entity.User">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        <id column="USER_ID" jdbcType="VARCHAR" property="userId" />
        <result column="TENANT_ID" jdbcType="VARCHAR" property="tenantId" />
        <result column="USER_CODE" jdbcType="VARCHAR" property="userCode" />
        <result column="PASSWORD" jdbcType="VARCHAR" property="password" />
        <result column="USER_NAME" jdbcType="VARCHAR" property="userName" />
        <result column="USER_TYPE" jdbcType="VARCHAR" property="userType" />
        <result column="IDENTITY_CODE" jdbcType="VARCHAR" property="identityCode" />
        <result column="INVLIDATE" jdbcType="DATE" property="invlidate" />
        <result column="AUTH_MODE" jdbcType="VARCHAR" property="authMode" />
        <result column="STATUS" jdbcType="VARCHAR" property="status" />
        <result column="UNLOCK_TIME" jdbcType="TIMESTAMP" property="unlockTime" />
        <result column="MENU_STYLE" jdbcType="VARCHAR" property="menuStyle" />
        <result column="MENU_ROLE" jdbcType="VARCHAR" property="menuRole" />
        <result column="LASTEST_LOGIN" jdbcType="TIMESTAMP" property="lastestLogin" />
        <result column="ERROR_COUNT" jdbcType="DECIMAL" property="errorCount" />
        <result column="START_DATE" jdbcType="DATE" property="startDate" />
        <result column="END_DATE" jdbcType="DATE" property="endDate" />
        <result column="MAC_ADDRESS" jdbcType="VARCHAR" property="macAddress" />
        <result column="IP_ADDRESS" jdbcType="VARCHAR" property="ipAddress" />
        <result column="MOBILE_NO" jdbcType="VARCHAR" property="mobileNo" />
        <result column="EMAIL" jdbcType="VARCHAR" property="email" />
        <result column="CA_SN" jdbcType="VARCHAR" property="caSn" />
        <result column="MAJOR_USERCODE" jdbcType="VARCHAR" property="majorUsercode" />
        <result column="MAJOR_USERNAME" jdbcType="VARCHAR" property="majorUsername" />
        <result column="MAIN_ORGID" jdbcType="VARCHAR" property="mainOrgid" />
        <result column="MAIN_POSITIONID" jdbcType="VARCHAR" property="mainPositionid" />
        <result column="CREATE_USER" jdbcType="VARCHAR" property="createUser" />
        <result column="CREATE_TIME" jdbcType="TIMESTAMP" property="createTime" />
        <result column="LAST_MODIFY_TIME" jdbcType="DECIMAL" property="lastModifyTime" />
        <result column="IS_DELETE" jdbcType="CHAR" property="isDelete" />
        <result column="IS_MODIFY" jdbcType="CHAR" property="isModify" />
    </resultMap>
    <sql id="Base_Column_List">
        USER_ID, TENANT_ID, USER_CODE, PASSWORD, USER_NAME, USER_TYPE, IDENTITY_CODE, INVLIDATE,
        AUTH_MODE, STATUS, UNLOCK_TIME, MENU_STYLE, MENU_ROLE, LASTEST_LOGIN, ERROR_COUNT,
        START_DATE, END_DATE, MAC_ADDRESS, IP_ADDRESS, MOBILE_NO, EMAIL, CA_SN, MAJOR_USERCODE,
        MAJOR_USERNAME, MAIN_ORGID, MAIN_POSITIONID, CREATE_USER, CREATE_TIME, LAST_MODIFY_TIME,
        IS_DELETE, IS_MODIFY
    </sql>
    <select id="selectSelective"  parameterType="User" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List" />
        from AFA_USER
        <where>
            <if test="userCode != null">
                user_code = #{userCode,jdbcType=VARCHAR}
            </if>
            <if test="password != null">
                and password = #{password,jdbcType=VARCHAR}
            </if>
        </where>
    </select>
    <select id="userList"  resultType="map">
        select a.user_id "userId",a.USER_NAME "userName",a.USER_CODE "userCode",b.org_name "mainOrg",c.position_name "mainPosition"
        from AFA_USER a
        left join afa_org b on a.MAIN_ORGID=b.org_id
        left join AFA_ORG_POSITION c on a.MAIN_POSITIONID= c.position_id
        <where>
            <if test="userCode != null">
                a.user_code like '%' ||  #{userCode} || '%'
            </if>
            <if test="userName != null">userList
                and a.user_name like '%' ||  #{userName} || '%'
            </if>
        </where>
        order by a.create_time
    </select>
</mapper>