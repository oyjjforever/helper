(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["delivery"],{2762:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("picture-upload"),a("div",[a("picture-show",{attrs:{fileName:"illust_21315033_20171126_185315"}})],1)],1)},i=[],o=a("ad35"),n=a("86ba"),l={name:"test",components:{PictureShow:n["a"],pictureUpload:o["a"]}},s=l,c=a("2877"),d=Object(c["a"])(s,r,i,!1,null,"7d573f50",null);e["default"]=d.exports},"28a5":function(t,e,a){"use strict";var r=a("aae3"),i=a("cb7c"),o=a("ebd6"),n=a("0390"),l=a("9def"),s=a("5f1b"),c=a("520a"),d=a("79e5"),u=Math.min,p=[].push,m="split",f="length",h="lastIndex",v=4294967295,b=!d((function(){RegExp(v,"y")}));a("214f")("split",2,(function(t,e,a,d){var g;return g="c"=="abbc"[m](/(b)*/)[1]||4!="test"[m](/(?:)/,-1)[f]||2!="ab"[m](/(?:ab)*/)[f]||4!="."[m](/(.?)(.?)/)[f]||"."[m](/()()/)[f]>1||""[m](/.?/)[f]?function(t,e){var i=String(this);if(void 0===t&&0===e)return[];if(!r(t))return a.call(i,t,e);var o,n,l,s=[],d=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),u=0,m=void 0===e?v:e>>>0,b=new RegExp(t.source,d+"g");while(o=c.call(b,i)){if(n=b[h],n>u&&(s.push(i.slice(u,o.index)),o[f]>1&&o.index<i[f]&&p.apply(s,o.slice(1)),l=o[0][f],u=n,s[f]>=m))break;b[h]===o.index&&b[h]++}return u===i[f]?!l&&b.test("")||s.push(""):s.push(i.slice(u)),s[f]>m?s.slice(0,m):s}:"0"[m](void 0,0)[f]?function(t,e){return void 0===t&&0===e?[]:a.call(this,t,e)}:a,[function(a,r){var i=t(this),o=void 0==a?void 0:a[e];return void 0!==o?o.call(a,i,r):g.call(String(i),a,r)},function(t,e){var r=d(g,t,this,e,g!==a);if(r.done)return r.value;var c=i(t),p=String(this),m=o(c,RegExp),f=c.unicode,h=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(b?"y":"g"),w=new m(b?c:"^(?:"+c.source+")",h),y=void 0===e?v:e>>>0;if(0===y)return[];if(0===p.length)return null===s(w,p)?[p]:[];var x=0,k=0,_=[];while(k<p.length){w.lastIndex=b?k:0;var D,$=s(w,b?p:p.slice(k));if(null===$||(D=u(l(w.lastIndex+(b?0:k)),p.length))===x)k=n(p,k,f);else{if(_.push(p.slice(x,k)),_.length===y)return _;for(var j=1;j<=$.length-1;j++)if(_.push($[j]),_.length===y)return _;k=x=D}}return _.push(p.slice(x)),_}]}))},"32d9":function(t,e,a){"use strict";var r=a("72f7"),i=a.n(r);i.a},"438f":function(t,e,a){"use strict";var r=a("b974"),i=a.n(r);i.a},5511:function(t,e,a){"use strict";var r=a("e22d"),i=a.n(r);i.a},"72f7":function(t,e,a){},"7bcb":function(t,e,a){"use strict";var r=a("e8d0"),i=a.n(r);i.a},"86ba":function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.picture.picShow?a("el-dialog",{directives:[{name:"dialog",rawName:"v-dialog"}],attrs:{width:"100vw",visible:t.picture.picShow,"modal-append-to-body":!1,"close-on-click-modal":!1},on:{"update:visible":function(e){return t.$set(t.picture,"picShow",e)}}},[a("div",{staticClass:"title",attrs:{slot:"title"},slot:"title"},[a("i"),a("span",[t._v("图片详情")])]),a("div",[a("img",{staticClass:"picture",attrs:{src:"http://106.14.181.20:8989/pictures/"+t.picture.picUrl,alt:"未上传"}})])]):t._e()},i=[],o={name:"picture-show",props:{picture:{picUrl:null,picShow:null}}},n=o,l=(a("7bcb"),a("2877")),s=Object(l["a"])(n,r,i,!1,null,"d366ff2a",null);e["a"]=s.exports},"99ac":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"delivery-index"},[a("el-calendar",{scopedSlots:t._u([{key:"dateCell",fn:function(e){e.date;var r=e.data;return[t.loading?a("span",[t._v(t._s(r.day.substring(8).split("-").join("-")))]):a("el-badge",{staticClass:"item",attrs:{value:t.content["num"+r.day.split("-").join("")]}},[a("div",{staticClass:"cell",attrs:{"show-overflow-tooltip":""},on:{click:function(e){return t.onView(r.day)}}},[t._v("\n          "+t._s(r.day.substring(8).split("-").join("-"))+"\n          "),a("br"),a("span",{staticStyle:{"font-size":"5px"},domProps:{innerHTML:t._s(t.content["day"+r.day.split("-").join("")])}})])])]}}])}),t.dialog.show?a("el-dialog",{directives:[{name:"dialog",rawName:"v-dialog"}],attrs:{width:"700px",visible:t.dialog.show,"modal-append-to-body":!1,"close-on-click-modal":!1},on:{"update:visible":function(e){return t.$set(t.dialog,"show",e)}}},[a("div",{staticClass:"title",attrs:{slot:"title"},slot:"title"},[a("icon",{staticClass:"el-icon-document"}),a("span",[t._v("查看详情")])],1),a("div",{staticClass:"content"},[a("el-carousel",{attrs:{height:"500px","indicator-position":"outside"}},t._l(t.dialog.data,(function(e){return a("el-carousel-item",{key:e.id},[a("el-form",{ref:"form",refInFor:!0,attrs:{disabled:"",model:e,"label-width":"110px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"客户姓名",prop:"name"}},[a("el-input",{model:{value:e.name,callback:function(a){t.$set(e,"name","string"===typeof a?a.trim():a)},expression:"item.name"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"下单时间",prop:"orderDate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:e.orderDate,callback:function(a){t.$set(e,"orderDate",a)},expression:"item.orderDate"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"客户电话",prop:"phone"}},[a("el-input",{model:{value:e.phone,callback:function(a){t.$set(e,"phone","string"===typeof a?a.trim():a)},expression:"item.phone"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"送货地址",prop:"address"}},[a("el-input",{model:{value:e.address,callback:function(a){t.$set(e,"address","string"===typeof a?a.trim():a)},expression:"item.address"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{attrs:{maxlength:"50",type:"textarea","show-word-limit":"",placeholder:"请输入内容"},model:{value:e.remark,callback:function(a){t.$set(e,"remark",a)},expression:"item.remark"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"总金额",prop:"amount"}},[a("el-input",{model:{value:e.amount,callback:function(a){t.$set(e,"amount","string"===typeof a?a.trim():a)},expression:"item.amount"}})],1)],1)],1)],1),a("el-table",{ref:"table",refInFor:!0,attrs:{border:"",stripe:"",data:e.detail,"highlight-current-row":""}},[a("el-table-column",{attrs:{type:"index",width:"50",align:"center",label:"序号"}}),a("el-table-column",{attrs:{prop:"model",label:"型号",align:"left","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"color",label:"颜色",align:"left","show-overflow-tooltip":""}}),t._v("、\n            "),a("el-table-column",{attrs:{prop:"format",label:"规格",align:"left","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"price",label:"单价",align:"left","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"num",label:"数量",align:"left","show-overflow-tooltip":""}})],1)],1)})),1)],1)]):t._e()],1)},i=[],o=(a("7f7f"),a("28a5"),a("ac6a"),a("96cf"),a("3b8d")),n={name:"index",data:function(){return{loading:!0,content:{},dialog:{show:!1,data:[]}}},mounted:function(){var t=this;this.$nextTick((function(){t.fetchData()}))},methods:{fetchData:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={},t.next=3,this.$api.queryData({params:{mapperId:"com.bosssoft.monitor.dao.OrderMapper.queryOrder",status:"3"}});case 3:a=t.sent,r=a.data,r.data.forEach((function(t){var a=t.sendDate.split("-").join(""),r="day"+a,i="num"+a;e[r]=r in e?e[r]+"<br/>"+t.name+": "+t.address:t.name+": "+t.address,e[i]=i in e?e[i]+1:1})),this.content=Object.assign({},e),this.loading=!1;case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),onView:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(this.content["num"+e.split("-").join("")]>0)){t.next=7;break}return this.dialog.show=!0,t.next=4,this.$api.queryData({params:{mapperId:"com.bosssoft.monitor.dao.OrderMapper.queryWholeOrderSelective",sendDate:e,status:"3"}});case 4:a=t.sent,r=a.data,this.dialog.data=this.formatOrderData(r.data);case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),formatOrderData:function(t){var e=[],a=[];for(var r in t.forEach((function(t){if(!a[t.id]){var e={id:t.id,name:t.name,phone:t.phone,address:t.address,orderDate:t.orderDate,amount:t.amount,remark:t.remark,detail:[]};a[t.id]=e}a[t.id]["detail"].push({model:t.model,color:t.color,format:t.format,price:t.price,num:t.num,discount:t.discount})})),a)e.push(a[r]);return e}}},l=n,s=(a("32d9"),a("2877")),c=Object(s["a"])(l,r,i,!1,null,"35da254a",null);e["default"]=c.exports},ad35:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.picture.picUpload?a("el-dialog",{directives:[{name:"dialog",rawName:"v-dialog"}],attrs:{width:"100vw",visible:t.picture.picUpload,"before-close":t.closeDailog,"modal-append-to-body":!1,"close-on-click-modal":!1},on:{"update:visible":function(e){return t.$set(t.picture,"picUpload",e)}}},[a("div",{staticClass:"title",attrs:{slot:"title"},slot:"title"},[a("i"),a("span",[t._v("图片上传")])]),a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http://106.14.181.20:8989/pictureUpload",data:{id:t.picture.picUploadId},"show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.imageUrl?a("img",{staticClass:"avatar",attrs:{src:t.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.upload.hasWarn,expression:"upload.hasWarn"}],staticClass:"warningArea"},[a("i",{staticClass:"el-icon-circle-check"}),a("span",[t._v(t._s(t.upload.warningMsg))])]),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",icon:"fa fa-save"},on:{click:t.closeDailog}},[t._v(" 关闭")])],1)],1):t._e()},i=[],o={name:"picture-upload",props:{picture:{picUploadId:null,picUpload:null}},data:function(){return{imageUrl:"",upload:{hasWarn:!1,warningMsg:""}}},methods:{handleAvatarSuccess:function(t,e){this.imageUrl=URL.createObjectURL(e.raw),this.upload.hasWarn=!0,this.upload.warningMsg="上传成功"},beforeAvatarUpload:function(t){var e="image/jpeg"===t.type,a=t.size/1024/1024<2;return e||this.$message.error("上传头像图片只能是 JPG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),e&&a},closeDailog:function(){this.picture.picUpload=!1,this.$emit("refreshOrder")}}},n=o,l=(a("5511"),a("2877")),s=Object(l["a"])(n,r,i,!1,null,"92596440",null);e["a"]=s.exports},b974:function(t,e,a){},cceb:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"delivery-index"},[a("el-calendar",{scopedSlots:t._u([{key:"dateCell",fn:function(e){e.date;var r=e.data;return[t.loading?a("span",[t._v(t._s(r.day.substring(8).split("-").join("-")))]):a("el-badge",{staticClass:"item",attrs:{value:t.content["num"+r.day.split("-").join("")]}},[a("div",{staticClass:"cell",attrs:{"show-overflow-tooltip":""},on:{click:function(e){return t.onView(r.day)}}},[t._v("\n          "+t._s(r.day.substring(8).split("-").join("-"))+"\n          "),a("br"),a("span",{staticStyle:{"font-size":"4px"}},[t._v("\n            "+t._s(t.content["day"+r.day.split("-").join("")]?"点击查看":"")+"\n          ")])])])]}}])}),t.dialog.show?a("el-dialog",{directives:[{name:"dialog",rawName:"v-dialog"}],attrs:{width:"100VW",visible:t.dialog.show,"modal-append-to-body":!1,"close-on-click-modal":!1},on:{"update:visible":function(e){return t.$set(t.dialog,"show",e)}}},[a("div",{staticClass:"title",attrs:{slot:"title"},slot:"title"},[a("icon",{staticClass:"el-icon-document"}),a("span",[t._v("查看详情")])],1),a("div",{staticClass:"content"},[a("el-carousel",{attrs:{height:"700px","indicator-position":"outside"}},t._l(t.dialog.data,(function(e){return a("el-carousel-item",{key:e.id},[a("el-form",{ref:"form",refInFor:!0,attrs:{disabled:"",model:e,"label-width":"110px"}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"客户姓名",prop:"name"}},[a("el-input",{model:{value:e.name,callback:function(a){t.$set(e,"name","string"===typeof a?a.trim():a)},expression:"item.name"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"下单时间",prop:"orderDate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:e.orderDate,callback:function(a){t.$set(e,"orderDate",a)},expression:"item.orderDate"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"客户电话",prop:"phone"}},[a("el-input",{model:{value:e.phone,callback:function(a){t.$set(e,"phone","string"===typeof a?a.trim():a)},expression:"item.phone"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"总金额",prop:"amount"}},[a("el-input",{model:{value:e.amount,callback:function(a){t.$set(e,"amount","string"===typeof a?a.trim():a)},expression:"item.amount"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"送货地址",prop:"address"}},[a("el-input",{model:{value:e.address,callback:function(a){t.$set(e,"address","string"===typeof a?a.trim():a)},expression:"item.address"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{attrs:{maxlength:"50",type:"textarea","show-word-limit":"",placeholder:"请输入内容"},model:{value:e.remark,callback:function(a){t.$set(e,"remark",a)},expression:"item.remark"}})],1)],1)],1)],1),a("el-table",{ref:"table",refInFor:!0,attrs:{border:"",stripe:"",data:e.detail,"highlight-current-row":""}},[a("el-table-column",{attrs:{prop:"model",label:"型号",align:"left","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"color",label:"颜色",align:"left","show-overflow-tooltip":""}}),t._v("、\n            "),a("el-table-column",{attrs:{prop:"format",label:"规格",align:"left","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"price",label:"单价",align:"left","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"num",label:"数量",align:"left","show-overflow-tooltip":""}})],1)],1)})),1)],1)]):t._e()],1)},i=[],o=(a("7f7f"),a("28a5"),a("ac6a"),a("96cf"),a("3b8d")),n=(a("6b54"),{name:"index",data:function(){return{screenWidth:window.screen.availWidth.toString(),loading:!0,content:{},dialog:{show:!1,data:[]}}},mounted:function(){var t=this;this.$nextTick((function(){t.fetchData()}))},methods:{fetchData:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={},t.next=3,this.$api.queryData({params:{mapperId:"com.bosssoft.monitor.dao.OrderMapper.queryOrder",status:"3"}});case 3:a=t.sent,r=a.data,r.data.forEach((function(t){var a=t.sendDate.split("-").join(""),r="day"+a,i="num"+a;e[r]=r in e?e[r]+"<br/>"+t.name+": "+t.address:t.name+": "+t.address,e[i]=i in e?e[i]+1:1})),this.content=Object.assign({},e),this.loading=!1;case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),onView:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(this.content["num"+e.split("-").join("")]>0)){t.next=7;break}return this.dialog.show=!0,t.next=4,this.$api.queryData({params:{mapperId:"com.bosssoft.monitor.dao.OrderMapper.queryWholeOrderSelective",sendDate:e,status:"3"}});case 4:a=t.sent,r=a.data,this.dialog.data=this.formatOrderData(r.data);case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),formatOrderData:function(t){var e=[],a=[];for(var r in t.forEach((function(t){if(!a[t.id]){var e={id:t.id,name:t.name,phone:t.phone,address:t.address,orderDate:t.orderDate,amount:t.amount,remark:t.remark,detail:[]};a[t.id]=e}a[t.id]["detail"].push({model:t.model,color:t.color,format:t.format,price:t.price,num:t.num,discount:t.discount})})),a)e.push(a[r]);return e}}}),l=n,s=(a("438f"),a("2877")),c=Object(s["a"])(l,r,i,!1,null,"00f07083",null);e["default"]=c.exports},e22d:function(t,e,a){},e8d0:function(t,e,a){}}]);
//# sourceMappingURL=delivery.2b3fcb25.js.map
