(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["permission"],{"18a0":function(e,t,a){"use strict";var r=a("8ec3"),i=a.n(r);i.a},"2b00":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"demo"},[a("div",{staticClass:"search-bar"},[a("el-form",{attrs:{inline:"",model:e.search}},[a("el-form-item",{attrs:{label:"角色名称"}},[a("el-input",{attrs:{clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onQuery(t)}},model:{value:e.search.field1,callback:function(t){e.$set(e.search,"field1",t)},expression:"search.field1"}})],1),a("el-form-item",{attrs:{label:"角色状态"}},[a("el-select",{attrs:{clearable:""},model:{value:e.search.field2,callback:function(t){e.$set(e.search,"field2",t)},expression:"search.field2"}},[a("el-option",{attrs:{label:"启用",value:1}}),a("el-option",{attrs:{label:"停用",value:0}})],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.onQuery}},[e._v("查询")])],1)],1)],1),a("div",{staticClass:"tool-bar"},[a("el-link",{attrs:{icon:"el-icon-document-add"},on:{click:e.onAdd}},[e._v("新增")]),a("div",{staticClass:"split-line"}),a("el-link",{attrs:{icon:"el-icon-refresh"},on:{click:e.featchData}},[e._v("刷新")])],1),a("div",{staticClass:"grid-container"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.grid.loading,expression:"grid.loading"}],ref:"table",attrs:{border:"",stripe:"",data:e.grid.rows,height:e.grid.height,"highlight-current-row":""},on:{"selection-change":function(t){return e.grid.selectedRow=t}}},[a("el-table-column",{attrs:{type:"selection",align:"center",width:"50"}}),a("el-table-column",{attrs:{type:"index",width:"50",align:"center",label:"序号"}}),a("el-table-column",{attrs:{prop:"field1",label:"文本类型",align:"left",width:"200","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{width:"100",align:"center",prop:"field2",label:"枚举类型","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.field2?a("el-tag",{attrs:{type:"success"}},[e._v("启用")]):a("el-tag",{attrs:{type:"danger"}},[e._v("停用")])]}}])}),a("el-table-column",{attrs:{width:"150",align:"right",label:"数值类型",prop:"field3","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{width:"150",align:"right",label:"金额类型",prop:"field4","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("currency")(t.row.field4)))]}}])}),a("el-table-column",{attrs:{width:"150",align:"center",label:"时间日期类型",prop:"field5","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("dateTime")(t.row.field5,"YYYY-MM-DD HH:mm:SS")))]}}])}),a("el-table-column",{attrs:{prop:"field6",label:"长文本类型",align:"left","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{align:"center",width:"100",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{effect:"light",placement:"bottom-start",content:"编辑",enterable:!1}},[a("el-link",{staticStyle:{"font-size":"20px",margin:"0 5px 0 0"},attrs:{icon:"el-icon-edit-outline"},on:{click:function(a){return e.onUpdate(t.row)}}})],1),a("el-tooltip",{attrs:{effect:"light",placement:"bottom-start",content:"删除",enterable:!1}},[a("el-link",{staticStyle:{"font-size":"20px",margin:"0 5px 0 0"},attrs:{icon:"el-icon-delete"},on:{click:function(a){return e.onDelete(t.row)}}})],1)]}}])})],1),a("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next","page-sizes":[10,30,50],"page-size":e.pagging.pageSize,"current-page":e.pagging.pageNum,total:e.pagging.total},on:{"size-change":e.onChangePageSize,"current-change":e.onChangeCurrentPage}})],1),e.dialog.show?a("el-dialog",{directives:[{name:"dialog",rawName:"v-dialog"}],attrs:{width:"700px",visible:e.dialog.show,"modal-append-to-body":!1,"close-on-click-modal":!1},on:{"update:visible":function(t){return e.$set(e.dialog,"show",t)}}},[a("div",{staticClass:"title",attrs:{slot:"title"},slot:"title"},[a("i",{class:e.dialogMode.icon}),a("span",[e._v("标题 —— "+e._s(e.dialogMode.title))])]),a("el-form",{ref:"form",attrs:{rules:e.dialog.rules,model:e.dialog.data,"label-width":"110px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"文本类型",prop:"field1"}},[a("el-input",{model:{value:e.dialog.data.field1,callback:function(t){e.$set(e.dialog.data,"field1","string"===typeof t?t.trim():t)},expression:"dialog.data.field1"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"枚举类型",prop:"field2"}},[a("el-select",{staticStyle:{width:"100%"},model:{value:e.dialog.data.field2,callback:function(t){e.$set(e.dialog.data,"field2",t)},expression:"dialog.data.field2"}},[a("el-option",{attrs:{label:"选项一",value:1}}),a("el-option",{attrs:{label:"选项二",value:2}})],1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"单选类型",prop:"field3"}},[a("el-radio",{attrs:{label:1},model:{value:e.dialog.data.field3,callback:function(t){e.$set(e.dialog.data,"field3",t)},expression:"dialog.data.field3"}},[e._v("男")]),a("el-radio",{attrs:{label:2},model:{value:e.dialog.data.field3,callback:function(t){e.$set(e.dialog.data,"field3",t)},expression:"dialog.data.field3"}},[e._v("女")])],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"复选类型",prop:"field4"}},[a("el-checkbox-group",{model:{value:e.dialog.data.field4,callback:function(t){e.$set(e.dialog.data,"field4",t)},expression:"dialog.data.field4"}},[a("el-checkbox",{attrs:{label:1}},[e._v("A")]),a("el-checkbox",{attrs:{label:2}},[e._v("B")]),a("el-checkbox",{attrs:{label:3}},[e._v("C")])],1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"数值类型",prop:"field5"}},[a("el-input-number",{staticStyle:{width:"100%"},attrs:{precision:2},model:{value:e.dialog.data.field5,callback:function(t){e.$set(e.dialog.data,"field5",t)},expression:"dialog.data.field5"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"时间日期类型",prop:"field6"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"选择日期"},model:{value:e.dialog.data.field6,callback:function(t){e.$set(e.dialog.data,"field6",t)},expression:"dialog.data.field6"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"日期范围类型",prop:"field7"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetimerange","range-separator":"至","end-placeholder":"结束日期","start-placeholder":"开始日期"},model:{value:e.dialog.data.field7,callback:function(t){e.$set(e.dialog.data,"field7",t)},expression:"dialog.data.field7"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"长文本类型",prop:"field8"}},[a("el-input",{attrs:{maxlength:"50",type:"textarea","show-word-limit":"",placeholder:"请输入内容"},model:{value:e.dialog.data.field8,callback:function(t){e.$set(e.dialog.data,"field8",t)},expression:"dialog.data.field8"}})],1)],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",icon:"fa fa-save"},on:{click:e.onSave}},[e._v(" 保存")])],1)],1):e._e()],1)},i=[],n=(a("8e6e"),a("ac6a"),a("456d"),a("bd86")),o=(a("96cf"),a("3b8d")),s=a("c32d"),l=a.n(s);function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(a,!0).forEach((function(t){Object(n["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var u={name:"",data:function(){return{search:{field1:null,field2:null},grid:{rows:[],height:null,loading:!1,selectedRow:[]},pagging:{total:0,pageNum:1,pageSize:10},dialog:{mode:null,show:!1,data:{field1:null,field2:null,field3:null,field4:null,field5:null,field6:null,field7:null,field8:null},rules:{field1:[{required:!0,message:"请选择名称！"}]}}}},computed:{dialogMode:function(){switch(this.dialog.mode){case 1:return{title:"新增",icon:"el-icon-document-add",message:"添加成功！"};case 2:return{title:"编辑",icon:"el-icon-edit-outline",message:"修改成功！"};case 3:return{title:"查看",icon:"el-icon-document"};default:return{}}}},created:function(){this.featchData()},mounted:function(){this.resize(),window.addEventListener("resize",this.resize)},beforeDestroy:function(){window.removeEventListener("resize",this.resize)},methods:{featchData:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.grid.loading=!0,e.next=3,this.$api.pagingData({params:{mapperId:"com.bosssoft.monitor.dao.ThresholdMapper.thresholds",pageNum:this.pagging.pageNum,pageSize:this.pagging.pageSize}});case 3:t=e.sent,a=t.data,this.grid.loading=!1,this.grid.rows=a.data;case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onQuery:function(){this.pagging.pageNum=1,this.featchData()},onChangeCurrentPage:function(e){this.pagging.pageNum=e,this.featchData()},onChangePageSize:function(e){this.pagging.pageNum=1,this.pagging.pageSize=e,this.featchData()},validateBeforeAdd:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve());case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),onAdd:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.validateBeforeAdd();case 3:t={field1:"",field2:1,field3:1,field4:[1,2],field5:5,field6:l()().format("YYYY-MM-DD HH:mm:ss"),field7:[l()().format("YYYY-MM-DD HH:mm:ss"),l()().format("YYYY-MM-DD HH:mm:ss")],field8:""},this.dialog.mode=1,this.dialog.show=!0,this.dialog.data=t,e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),e.t0.message&&this.$message.error(e.t0.message);case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));function t(){return e.apply(this,arguments)}return t}(),validateBeforeDelete:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve());case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),onDelete:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.validateBeforeDelete(t);case 3:this.$confirm("您确定要删除当前选中的记录吗?","确认删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.$api.remove({params:{mapperId:"com.bosssoft.monitor.dao.ThresholdMapper.delete",ids:JSON.stringify(a.grid.selectedRow.map((function(e){return e.id})))}});case 2:a.featchData(),a.$message.success("删除成功！");case 4:case"end":return e.stop()}}),e)})))).catch((function(){})),e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),e.t0.message&&this.$message.error(e.t0.message);case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(t){return e.apply(this,arguments)}return t}(),onUpdate:function(e){this.dialog.mode=2,this.dialog.show=!0,this.dialog.data=Object.assign({},e)},validateBeforeSave:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$refs["form"].validate();case 2:if(1!==this.dialog.mode){e.next=10;break}return e.next=5,this.$api.queryData({params:{mapperId:"com.bosssoft.monitor.dao.ThresholdMapper.isExists",isList:!1,name:this.dialog.data.field1}});case 5:if(t=e.sent,a=t.data,!(a.data.count>0)){e.next=10;break}return this.$message.info("当前编码已存在，请重新输入！"),e.abrupt("return",Promise.reject(new Error));case 10:return this.dialog.mode,e.abrupt("return",Promise.resolve());case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onSave:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.validateBeforeSave();case 3:if(1!==this.dialog.mode){e.next=8;break}return e.next=6,this.$api.add({data:d({mapperId:"com.bosssoft.monitor.dao.ThresholdMapper.insertSelective"},this.dialog.data)});case 6:e.next=11;break;case 8:return t=this.dialog.data,e.next=11,this.$api.modify({data:{mapperId:"com.bosssoft.monitor.dao.ThresholdMapper.updateByPrimaryKeySelective",fid:t.fid,field1:t.field1,field2:t.field2,field3:t.field3}});case 11:this.featchData(),this.dialog.show=!1,this.$message.success(this.dialogMode.message),e.next=19;break;case 16:e.prev=16,e.t0=e["catch"](0),e.t0.message&&this.$message.error(e.t0.message);case 19:case"end":return e.stop()}}),e,this,[[0,16]])})));function t(){return e.apply(this,arguments)}return t}(),resize:function(){this.grid.height=this.$el.clientHeight-106}}},p=u,f=(a("50c6"),a("2877")),g=Object(f["a"])(p,r,i,!1,null,"34741aa9",null);t["default"]=g.exports},"2e08":function(e,t,a){var r=a("9def"),i=a("9744"),n=a("be13");e.exports=function(e,t,a,o){var s=String(n(e)),l=s.length,c=void 0===a?" ":String(a),d=r(t);if(d<=l||""==c)return s;var u=d-l,p=i.call(c,Math.ceil(u/c.length));return p.length>u&&(p=p.slice(0,u)),o?p+s:s+p}},"3aca":function(e,t,a){},4154:function(e,t,a){"use strict";var r=a("88a7"),i=a.n(r);i.a},4199:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"demo2"},[a("div",{staticClass:"tool-bar"},[a("el-link",{attrs:{icon:"el-icon-document-add"},on:{click:e.onAdd}},[e._v("新增")]),a("div",{staticClass:"split-line"}),a("el-link",{attrs:{icon:"el-icon-refresh"},on:{click:e.featchData}},[e._v("刷新")])],1),a("div",{staticClass:"grid-container"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.grid.loading,expression:"grid.loading"}],ref:"table",attrs:{border:"",stripe:"",data:e.grid.rows,height:e.grid.height,"highlight-current-row":""},on:{"selection-change":function(t){return e.grid.selectedRow=t}}},[a("el-table-column",{attrs:{type:"selection",align:"center",width:"50"}}),a("el-table-column",{attrs:{type:"index",width:"50",align:"center",label:"序号"}}),a("el-table-column",{attrs:{prop:"field1",label:"文本类型",align:"left",width:"200","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{width:"100",align:"center",prop:"field2",label:"枚举类型","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.field2?a("el-tag",{attrs:{type:"success"}},[e._v("启用")]):a("el-tag",{attrs:{type:"danger"}},[e._v("停用")])]}}])}),a("el-table-column",{attrs:{width:"150",align:"right",label:"数值类型",prop:"field3","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{width:"150",align:"right",label:"金额类型",prop:"field4","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("currency")(t.row.field4)))]}}])}),a("el-table-column",{attrs:{width:"150",align:"center",label:"时间日期类型",prop:"field5","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("dateTime")(t.row.field5,"YYYY-MM-DD HH:mm:SS")))]}}])}),a("el-table-column",{attrs:{prop:"field6",label:"长文本类型",align:"left","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{align:"center",width:"100",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{effect:"light",placement:"bottom-start",content:"编辑",enterable:!1}},[a("el-link",{staticStyle:{"font-size":"20px",margin:"0 5px 0 0"},attrs:{icon:"el-icon-edit-outline"},on:{click:function(a){return e.onUpdate(t.row)}}})],1),a("el-tooltip",{attrs:{effect:"light",placement:"bottom-start",content:"删除",enterable:!1}},[a("el-link",{staticStyle:{"font-size":"20px",margin:"0 5px 0 0"},attrs:{icon:"el-icon-delete"},on:{click:function(a){return e.onDelete(t.row)}}})],1)]}}])})],1)],1),e.dialog.show?a("el-dialog",{directives:[{name:"dialog",rawName:"v-dialog"}],attrs:{width:"700px",visible:e.dialog.show,"modal-append-to-body":!1,"close-on-click-modal":!1},on:{"update:visible":function(t){return e.$set(e.dialog,"show",t)}}},[a("div",{staticClass:"title",attrs:{slot:"title"},slot:"title"},[a("i",{class:e.dialogMode.icon}),a("span",[e._v("标题 —— "+e._s(e.dialogMode.title))])]),a("el-form",{ref:"form",attrs:{rules:e.dialog.rules,model:e.dialog.data,"label-width":"110px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"文本类型",prop:"field1"}},[a("el-input",{model:{value:e.dialog.data.field1,callback:function(t){e.$set(e.dialog.data,"field1","string"===typeof t?t.trim():t)},expression:"dialog.data.field1"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"枚举类型",prop:"field2"}},[a("el-select",{staticStyle:{width:"100%"},model:{value:e.dialog.data.field2,callback:function(t){e.$set(e.dialog.data,"field2",t)},expression:"dialog.data.field2"}},[a("el-option",{attrs:{label:"选项一",value:1}}),a("el-option",{attrs:{label:"选项二",value:2}})],1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"单选类型",prop:"field3"}},[a("el-radio",{attrs:{label:1},model:{value:e.dialog.data.field3,callback:function(t){e.$set(e.dialog.data,"field3",t)},expression:"dialog.data.field3"}},[e._v("男")]),a("el-radio",{attrs:{label:2},model:{value:e.dialog.data.field3,callback:function(t){e.$set(e.dialog.data,"field3",t)},expression:"dialog.data.field3"}},[e._v("女")])],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"复选类型",prop:"field4"}},[a("el-checkbox-group",{model:{value:e.dialog.data.field4,callback:function(t){e.$set(e.dialog.data,"field4",t)},expression:"dialog.data.field4"}},[a("el-checkbox",{attrs:{label:1}},[e._v("A")]),a("el-checkbox",{attrs:{label:2}},[e._v("B")]),a("el-checkbox",{attrs:{label:3}},[e._v("C")])],1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"数值类型",prop:"field5"}},[a("el-input-number",{staticStyle:{width:"100%"},attrs:{precision:2},model:{value:e.dialog.data.field5,callback:function(t){e.$set(e.dialog.data,"field5",t)},expression:"dialog.data.field5"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"时间日期类型",prop:"field6"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"选择日期"},model:{value:e.dialog.data.field6,callback:function(t){e.$set(e.dialog.data,"field6",t)},expression:"dialog.data.field6"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"日期范围类型",prop:"field7"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetimerange","range-separator":"至","end-placeholder":"结束日期","start-placeholder":"开始日期"},model:{value:e.dialog.data.field7,callback:function(t){e.$set(e.dialog.data,"field7",t)},expression:"dialog.data.field7"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"长文本类型",prop:"field8"}},[a("el-input",{attrs:{maxlength:"50",type:"textarea","show-word-limit":"",placeholder:"请输入内容"},model:{value:e.dialog.data.field8,callback:function(t){e.$set(e.dialog.data,"field8",t)},expression:"dialog.data.field8"}})],1)],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",icon:"fa fa-save"},on:{click:e.onSave}},[e._v(" 保存")])],1)],1):e._e()],1)},i=[],n=(a("8e6e"),a("ac6a"),a("456d"),a("bd86")),o=(a("96cf"),a("3b8d")),s=a("c32d"),l=a.n(s);function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(a,!0).forEach((function(t){Object(n["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var u={name:"",data:function(){return{grid:{rows:[],height:null,loading:!1,selectedRow:[]},dialog:{mode:null,show:!1,data:{field1:null,field2:null,field3:null,field4:null,field5:null,field6:null,field7:null,field8:null},rules:{field1:[{required:!0,message:"请选择名称！"}]}}}},computed:{dialogMode:function(){switch(this.dialog.mode){case 1:return{title:"新增",icon:"el-icon-document-add",message:"添加成功！"};case 2:return{title:"编辑",icon:"el-icon-edit-outline",message:"修改成功！"};case 3:return{title:"查看",icon:"el-icon-document"};default:return{}}}},created:function(){this.featchData()},mounted:function(){this.resize(),window.addEventListener("resize",this.resize)},beforeDestroy:function(){window.removeEventListener("resize",this.resize)},methods:{featchData:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.grid.loading=!0,e.next=3,this.$api.queryData({params:{mapperId:"com.bosssoft.monitor.dao.ThresholdMapper.thresholds"}});case 3:t=e.sent,a=t.data,this.grid.loading=!1,this.grid.rows=a.data;case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),validateBeforeAdd:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve());case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),onAdd:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.validateBeforeAdd();case 3:t={field1:"",field2:1,field3:1,field4:[1,2],field5:5,field6:l()().format("YYYY-MM-DD HH:mm:ss"),field7:[l()().format("YYYY-MM-DD HH:mm:ss"),l()().format("YYYY-MM-DD HH:mm:ss")],field8:""},this.dialog.mode=1,this.dialog.show=!0,this.dialog.data=t,e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),e.t0.message&&this.$message.error(e.t0.message);case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));function t(){return e.apply(this,arguments)}return t}(),validateBeforeDelete:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve());case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),onDelete:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.validateBeforeDelete(t);case 3:this.$confirm("您确定要删除当前选中的记录吗?","确认删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.$api.remove({params:{mapperId:"com.bosssoft.monitor.dao.ThresholdMapper.delete",ids:JSON.stringify(a.grid.selectedRow.map((function(e){return e.id})))}});case 2:a.featchData(),a.$message.success("删除成功！");case 4:case"end":return e.stop()}}),e)})))).catch((function(){})),e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),e.t0.message&&this.$message.error(e.t0.message);case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(t){return e.apply(this,arguments)}return t}(),onUpdate:function(e){this.dialog.mode=2,this.dialog.show=!0,this.dialog.data=Object.assign({},e)},validateBeforeSave:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$refs["form"].validate();case 2:if(1!==this.dialog.mode){e.next=10;break}return e.next=5,this.$api.queryData({params:{mapperId:"com.bosssoft.monitor.dao.ThresholdMapper.isExists",isList:!1,name:this.dialog.data.field1}});case 5:if(t=e.sent,a=t.data,!(a.data.count>0)){e.next=10;break}return this.$message.info("当前编码已存在，请重新输入！"),e.abrupt("return",Promise.reject(new Error));case 10:return this.dialog.mode,e.abrupt("return",Promise.resolve());case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onSave:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.validateBeforeSave();case 3:if(1!==this.dialog.mode){e.next=8;break}return e.next=6,this.$api.add({data:d({mapperId:"com.bosssoft.monitor.dao.ThresholdMapper.insertSelective"},this.dialog.data)});case 6:e.next=11;break;case 8:return t=this.dialog.data,e.next=11,this.$api.modify({data:{mapperId:"com.bosssoft.monitor.dao.ThresholdMapper.updateByPrimaryKeySelective",fid:t.fid,field1:t.field1,field2:t.field2,field3:t.field3}});case 11:this.featchData(),this.dialog.show=!1,this.$message.success(this.dialogMode.message),e.next=19;break;case 16:e.prev=16,e.t0=e["catch"](0),e.t0.message&&this.$message.error(e.t0.message);case 19:case"end":return e.stop()}}),e,this,[[0,16]])})));function t(){return e.apply(this,arguments)}return t}(),resize:function(){this.grid.height=this.$el.clientHeight-31}}},p=u,f=(a("4154"),a("2877")),g=Object(f["a"])(p,r,i,!1,null,"e679f67e",null);t["default"]=g.exports},"4d0d":function(e,t,a){"use strict";var r=a("eccc"),i=a.n(r);i.a},"4dad":function(e,t,a){},"50c6":function(e,t,a){"use strict";var r=a("c718"),i=a.n(r);i.a},"5dbc":function(e,t,a){var r=a("d3f4"),i=a("8b97").set;e.exports=function(e,t,a){var n,o=t.constructor;return o!==a&&"function"==typeof o&&(n=o.prototype)!==a.prototype&&r(n)&&i&&i(e,n),e}},"7cdf":function(e,t,a){var r=a("5ca1");r(r.S,"Number",{isInteger:a("9c12")})},"867b":function(e,t,a){"use strict";var r=a("3aca"),i=a.n(r);i.a},"88a7":function(e,t,a){},"8b97":function(e,t,a){var r=a("d3f4"),i=a("cb7c"),n=function(e,t){if(i(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{r=a("9b43")(Function.call,a("11e9").f(Object.prototype,"__proto__").set,2),r(e,[]),t=!(e instanceof Array)}catch(i){t=!0}return function(e,a){return n(e,a),t?e.__proto__=a:r(e,a),e}}({},!1):void 0),check:n}},"8ec3":function(e,t,a){},9744:function(e,t,a){"use strict";var r=a("4588"),i=a("be13");e.exports=function(e){var t=String(i(this)),a="",n=r(e);if(n<0||n==1/0)throw RangeError("Count can't be negative");for(;n>0;(n>>>=1)&&(t+=t))1&n&&(a+=t);return a}},"9c12":function(e,t,a){var r=a("d3f4"),i=Math.floor;e.exports=function(e){return!r(e)&&isFinite(e)&&i(e)===e}},aa77:function(e,t,a){var r=a("5ca1"),i=a("be13"),n=a("79e5"),o=a("fdef"),s="["+o+"]",l="​",c=RegExp("^"+s+s+"*"),d=RegExp(s+s+"*$"),u=function(e,t,a){var i={},s=n((function(){return!!o[e]()||l[e]()!=l})),c=i[e]=s?t(p):o[e];a&&(i[a]=c),r(r.P+r.F*s,"String",i)},p=u.trim=function(e,t){return e=String(i(e)),1&t&&(e=e.replace(c,"")),2&t&&(e=e.replace(d,"")),e};e.exports=u},bbd0:function(e,t,a){"use strict";var r=a("4dad"),i=a.n(r);i.a},c23a:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"permission-index"},[a("div",{staticClass:"left-aside"},[a("menu-tree",{ref:"menuTree"})],1),a("div",{staticClass:"right-aside"},[a("div",{staticClass:"tool-bar"},[a("el-link",{attrs:{icon:"el-icon-document-checked"},on:{click:function(t){return e.authorization()}}},[e._v("确认授权")]),a("div",{staticClass:"split-line"}),a("el-link",{attrs:{icon:"el-icon-document-add"},on:{click:function(t){return e.$refs.roleList.onAdd()}}},[e._v("新增角色")]),a("div",{staticClass:"split-line"}),a("el-link",{attrs:{icon:"el-icon-circle-check"},on:{click:function(t){return e.$refs.roleList.toggleEnable({status:1})}}},[e._v("启用")]),a("div",{staticClass:"split-line"}),a("el-link",{attrs:{icon:"el-icon-remove-outline"},on:{click:function(t){return e.$refs.roleList.toggleEnable({status:0})}}},[e._v("停用")])],1),a("div",{staticClass:"grid-content"},[a("div",{staticClass:"right-top"},[a("role-list",{ref:"roleList",on:{selectMenu:function(t){return e.$refs["menuTree"].selectMenu(t)},queryUser:function(t){return e.$refs["userList"].featchRoleUser(t)}}})],1),a("div",{staticClass:"right-bottom"},[a("user-list",{ref:"userList",on:{addRoleUser:e.addRoleUser,beforeAddRoleUser:e.beforeAddRoleUser,removeRoleUser:e.removeRoleUser}})],1)])])])},i=[],n=(a("96cf"),a("3b8d")),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"menu-tree"},[a("el-input",{staticClass:"search-input",attrs:{placeholder:"搜索"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},slot:"append"})],1),a("el-tree",{ref:"menuTree",staticClass:"tree-view menu-tree-list",attrs:{"show-checkbox":"","expand-on-click-node":"","default-expanded-keys":["-1"],"node-key":"id",data:e.menus,props:{label:"name",children:"children"},"filter-node-method":e.filterNode},on:{"check-change":e.onCheckChange}})],1)},s=[],l=(a("ac6a"),a("7514"),a("7f7f"),{name:"MenuTree",data:function(){return{rawMenus:[],menus:[{id:"-1",name:"菜单列表",children:[]}],filterText:null}},created:function(){},watch:{filterText:function(e){this.$refs.menuTree.filter(e)}},mounted:function(){this.featchMenu()},methods:{filterNode:function(e,t){return!e||-1!==t.name.indexOf(e)},featchMenu:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$api.queryData({params:{mapperId:"com.bosssoft.monitor.dao.MenuMapper.menus"}});case 2:t=e.sent,a=t.data,this.rawMenus=a.data,this.initMenuData(a.data);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),initMenuData:function(e){var t=this,a=e.filter((function(t){return!e.find((function(e){return e.id===t.parentId}))}));a.forEach((function(a){t.getChildMenu(a,e)})),this.menus[0].children=a},getChildMenu:function(e,t){var a=this;e.children=[],t.forEach((function(r){r.parentId===e.id&&(e.children.push(r),a.getChildMenu(r,t))}))},selectMenu:function(e){this.$refs["menuTree"].setCheckedKeys(e)},onCheckChange:function(e,t){var a,r;"0404"===e.menuCode&&t&&this.$refs.menuTree.setChecked(null===(a=this.rawMenus.find((function(e){return"0405"===e.menuCode})))||void 0===a?void 0:a.id,!1);"0405"===e.menuCode&&t&&this.$refs.menuTree.setChecked(null===(r=this.rawMenus.find((function(e){return"0404"===e.menuCode})))||void 0===r?void 0:r.id,!1)}}}),c=l,d=(a("18a0"),a("2877")),u=Object(d["a"])(c,o,s,!1,null,"725bf80a",null),p=u.exports,f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"role-list"},[a("div",{staticClass:"search-bar"},[a("el-form",{attrs:{inline:"",model:e.search}},[a("el-form-item",{attrs:{label:"角色名称"}},[a("el-input",{attrs:{clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onQuery(t)}},model:{value:e.search.roleName,callback:function(t){e.$set(e.search,"roleName",t)},expression:"search.roleName"}})],1),a("el-form-item",{attrs:{label:"角色状态"}},[a("el-select",{attrs:{clearable:""},model:{value:e.search.status,callback:function(t){e.$set(e.search,"status",t)},expression:"search.status"}},[a("el-option",{attrs:{label:"启用",value:1}}),a("el-option",{attrs:{label:"停用",value:0}})],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"warning",icon:"el-icon-search"},on:{click:e.onQuery}},[e._v("查询")])],1)],1)],1),e.grid.height?a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.grid.loading,expression:"grid.loading"}],ref:"table",attrs:{border:"",stripe:"","highlight-current-row":"",height:e.grid.height,data:e.grid.rows},on:{"row-click":e.onRowClick,"selection-change":function(t){return e.selectedRoles=t}}},[a("el-table-column",{attrs:{type:"index",width:"50",align:"center",label:"序号"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"code",label:"角色编码",width:"200"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"name",label:"角色名称"}}),a("el-table-column",{attrs:{prop:"status",align:"center",label:"角色状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return["1"===t.row.status?a("el-tag",{attrs:{type:"success"}},[e._v("启用")]):a("el-tag",{attrs:{type:"danger"}},[e._v("停用")])]}}],null,!1,4021331983)}),a("el-table-column",{attrs:{align:"center",width:"100",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{staticStyle:{"font-size":"20px",margin:"0 5px 0 0"},attrs:{icon:"el-icon-edit-outline"},on:{click:function(a){return e.onUpdate(t.row)}}}),a("el-link",{staticStyle:{"font-size":"20px"},attrs:{icon:"el-icon-delete"},on:{click:function(a){return e.onDelete(t.row)}}})]}}],null,!1,2070165969)})],1):e._e(),a("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next","page-sizes":[10,30,50],"page-size":e.pagging.pageSize,"current-page":e.pagging.pageNum,total:e.pagging.total},on:{"size-change":e.onChangePageSize,"current-change":e.onChangeCurrentPage}}),e.dialog.show?a("el-dialog",{directives:[{name:"dialog",rawName:"v-dialog"}],attrs:{width:"640px",visible:e.dialog.show,"modal-append-to-body":!1,"close-on-click-modal":!1},on:{"update:visible":function(t){return e.$set(e.dialog,"show",t)}}},[a("div",{staticClass:"title",attrs:{slot:"title"},slot:"title"},[a("i",{class:e.dialogMode.icon}),a("span",[e._v("角色维护 —— "+e._s(e.dialogMode.title))])]),a("el-form",{ref:"form",attrs:{rules:e.dialog.rules,model:e.dialog.data,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"角色编码",prop:"code"}},[a("el-input",{attrs:{disabled:1!==e.dialog.mode},model:{value:e.dialog.data.code,callback:function(t){e.$set(e.dialog.data,"code",t)},expression:"dialog.data.code"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"角色名称",prop:"name"}},[a("el-input",{attrs:{maxlength:"10"},model:{value:e.dialog.data.name,callback:function(t){e.$set(e.dialog.data,"name",t)},expression:"dialog.data.name"}})],1)],1)],1),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-select",{model:{value:e.dialog.data.status,callback:function(t){e.$set(e.dialog.data,"status",t)},expression:"dialog.data.status"}},[a("el-option",{attrs:{label:"启用",value:"1"}}),a("el-option",{attrs:{label:"停用",value:"0"}})],1)],1),a("el-form-item",{attrs:{label:"说明",prop:"remark"}},[a("el-input",{attrs:{type:"textarea",maxlength:"100","show-word-limit":""},model:{value:e.dialog.data.remark,callback:function(t){e.$set(e.dialog.data,"remark",t)},expression:"dialog.data.remark"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",icon:"fa fa-save"},on:{click:e.onSave}},[e._v(" 保存")])],1)],1):e._e()],1)},g=[],h=(a("8e6e"),a("456d"),a("bd86")),m=(a("6b54"),a("f576"),a("c5f6"),a("7cdf"),a("386d"),a("c32d")),b=a.n(m);function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(a,!0).forEach((function(t){Object(h["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var y={name:"RoleList",data:function(){return{search:{status:null,roleName:null},grid:{rows:[],height:null,loading:!1},pagging:{total:0,pageNum:1,pageSize:10},dialog:{mode:null,show:!1,data:{name:null,code:null,status:null,remark:null},rules:{code:[{required:!0,message:"请输入角色编码"}],name:[{required:!0,message:"请输入角色名称"}]}},selectedRoles:[]}},computed:{dialogMode:function(){switch(this.dialog.mode){case 1:return{title:"新增",icon:"el-icon-document-add",message:"添加成功！"};case 2:return{title:"编辑",icon:"el-icon-edit-outline",message:"修改成功！"};case 3:return{title:"查看",icon:"el-icon-document"};default:return{}}}},created:function(){},mounted:function(){this.grid.height=this.$el.clientHeight-75,this.featchData()},methods:{featchData:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.grid.loading=!0,e.next=3,this.$api.pagingData({params:{mapperId:"com.bosssoft.monitor.dao.RoleMapper.roles",pageNum:this.pagging.pageNum,pageSize:this.pagging.pageSize,roleName:this.search.roleName,status:this.search.status}});case 3:t=e.sent,a=t.data,this.grid.loading=!1,this.grid.rows=a.data.rows,this.pagging.total=a.data.total,this.pagging.pageNum=a.data.pageNum,this.pagging.pageSize=a.data.pageSize;case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onQuery:function(){this.pagging.pageNum=1,this.featchData()},onChangeCurrentPage:function(e){this.pagging.pageNum=e,this.featchData()},onChangePageSize:function(e){this.pagging.pageNum=1,this.pagging.pageSize=e,this.featchData()},onAdd:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,a,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={code:b()().format("HHmmss"),name:null,remark:null,status:"1"},e.next=3,this.$api.queryData({params:{mapperId:"com.bosssoft.monitor.dao.RoleMapper.newestCode",isList:!1}});case 3:r=e.sent,i=r.data,(null===(t=i.data)||void 0===t?void 0:t.code)&&Number.isInteger(parseInt(i.data.code))&&(a.code=(parseInt(i.data.code)+1).toString().padStart(6,"0")),this.dialog.mode=1,this.dialog.data=a,this.dialog.show=!0;case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),validateBeforeDelete:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$api.queryData({params:{mapperId:"com.bosssoft.monitor.dao.RoleMapper.ifUsed",isList:!1,roleId:t.fid}});case 2:if(a=e.sent,r=a.data,!(r.data.count>0)){e.next=7;break}return this.$message.info("该角色有用户在使用，不能删除！"),e.abrupt("return",Promise.reject(new Error));case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),onDelete:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.validateBeforeDelete(t);case 3:this.$confirm("您确定要删除当前记录吗?","确认删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.$api.remove({params:{mapperId:"com.bosssoft.monitor.dao.RoleMapper.deleteByPrimaryKey",fid:t.fid}});case 2:a.featchData(),a.$message.success("删除成功！");case 4:case"end":return e.stop()}}),e)})))).catch((function(){})),e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),e.t0.message&&this.$message.error(e.t0.message);case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(t){return e.apply(this,arguments)}return t}(),onUpdate:function(e){this.dialog.mode=2,this.dialog.show=!0,this.dialog.data=Object.assign({},e)},validateBeforeSave:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$refs["form"].validate();case 2:if(1!==this.dialog.mode){e.next=10;break}return e.next=5,this.$api.queryData({params:{mapperId:"com.bosssoft.monitor.dao.RoleMapper.checkCode",isList:!1,code:this.dialog.data.code}});case 5:if(t=e.sent,a=t.data,!(a.data.count>0)){e.next=10;break}return this.$message.info("角色编码已存在，请重新输入！"),e.abrupt("return",Promise.reject(new Error));case 10:return e.abrupt("return",Promise.resolve());case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onSave:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.validateBeforeSave();case 3:if(1!==this.dialog.mode){e.next=8;break}return e.next=6,this.$api.add({data:w({mapperId:"com.bosssoft.monitor.dao.RoleMapper.insertSelective"},this.dialog.data)});case 6:e.next=11;break;case 8:return t=this.dialog.data,e.next=11,this.$api.modify({data:{mapperId:"com.bosssoft.monitor.dao.RoleMapper.updateByPrimaryKeySelective",fid:t.fid,name:t.name,status:t.status,remark:t.remark}});case 11:this.dialog.show=!1,this.featchData(),this.$message.success(this.dialogMode.message),e.next=19;break;case 16:e.prev=16,e.t0=e["catch"](0),e.t0.message&&this.$message.error(e.t0.message);case 19:case"end":return e.stop()}}),e,this,[[0,16]])})));function t(){return e.apply(this,arguments)}return t}(),onRowClick:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$refs["table"].clearSelection(),this.$refs["table"].toggleRowSelection(t),this.queryMenuAndUser(t);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),queryMenuAndUser:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.$emit("queryUser",t),e.next=3,this.$api.queryData({params:{mapperId:"com.bosssoft.monitor.dao.RoleMapper.roleMenu",roleId:t.fid}});case 3:a=e.sent,r=a.data,this.$emit("selectMenu",r.data);case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),toggleEnable:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.status;0!==this.selectedRoles.length?this.$api.modify({data:{mapperId:"com.bosssoft.monitor.dao.RoleMapper.toggleEnable",status:a,roleIds:JSON.stringify(this.selectedRoles.map((function(e){return e.fid})))}}).then((function(){e.featchData()})):this.$message.info("请选择角色！")}}},x=y,k=(a("4d0d"),Object(d["a"])(x,f,g,!1,null,"13182f31",null)),$=k.exports,R=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"user-list"},[a("div",{staticClass:"tool-bar"},[a("el-link",{attrs:{icon:"el-icon-document-add"},on:{click:function(t){return e.$emit("beforeAddRoleUser")}}},[e._v("新增角色用户")]),e._v(" \n  ")],1),e.grid.height?a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.grid.loading,expression:"grid.loading"}],attrs:{border:"",stripe:"",height:e.grid.height,data:e.grid.rows}},[a("el-table-column",{attrs:{type:"index",width:"50",align:"center",label:"序号"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"userName",label:"用户名称",width:"200"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"userCode",label:"角色账号",width:"120"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"identityCode",align:"center",label:"身份证号",width:"130"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"mobileNo",align:"center",label:"手机号",width:"130"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"mainOrg",label:"所属机构",width:"130"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"mainPosition",label:"所属岗位"}}),a("el-table-column",{attrs:{align:"center",width:"50",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{staticStyle:{"font-size":"20px"},attrs:{icon:"el-icon-delete"},on:{click:function(a){return e.onDelete(t.row)}}})]}}],null,!1,1604076764)})],1):e._e(),a("el-dialog",{directives:[{name:"dialog",rawName:"v-dialog"}],attrs:{width:"900px",visible:e.dialog.show,"modal-append-to-body":!1,"close-on-click-modal":!1},on:{"update:visible":function(t){return e.$set(e.dialog,"show",t)},open:e.onDialogOpen}},[a("div",{staticClass:"title",attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"el-icon-document-add"}),a("span",[e._v("角色用户 —— 新增")])]),a("div",{staticClass:"search-bar"},[a("el-form",{attrs:{inline:"",model:e.dialog.search}},[a("el-form-item",{attrs:{label:"用户名称"}},[a("el-input",{attrs:{clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onQuery(t)}},model:{value:e.dialog.search.userName,callback:function(t){e.$set(e.dialog.search,"userName",t)},expression:"dialog.search.userName"}})],1),a("el-form-item",{attrs:{label:"用户账号"}},[a("el-input",{attrs:{clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onQuery(t)}},model:{value:e.dialog.search.userCode,callback:function(t){e.$set(e.dialog.search,"userCode",t)},expression:"dialog.search.userCode"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"warning",icon:"el-icon-search"},on:{click:e.onQuery}},[e._v("查询")])],1)],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.dialog.grid.loading,expression:"dialog.grid.loading"}],ref:"userTable",attrs:{border:"",stripe:"",height:365,data:e.dialog.grid.rows},on:{"selection-change":function(t){return e.selectedUsers=t},"row-click":function(t){return e.$refs["userTable"].toggleRowSelection(t)}}},[a("el-table-column",{attrs:{type:"selection",align:"center",width:"50"}}),a("el-table-column",{attrs:{type:"index",width:"50",align:"center",label:"序号"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"userName",label:"用户名称",width:"200"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"userCode",label:"用户账号",width:"150"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"mainOrg",label:"所属机构",width:"200"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"mainPosition",label:"所属岗位"}})],1),a("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next","page-sizes":[10,30,50],"page-size":e.dialog.pagging.pageSize,"current-page":e.dialog.pagging.pageNum,total:e.dialog.pagging.total},on:{"size-change":e.onChangePageSize,"current-change":e.onChangeCurrentPage}}),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",icon:"fa fa-save"},on:{click:e.onSave}},[e._v(" 保存")])],1)],1)],1)},O=[],S={name:"UserList",data:function(){return{grid:{rows:[],height:null,loading:!1},dialog:{show:!1,search:{userName:null,userCode:null},grid:{rows:[],height:null,loading:!1},pagging:{total:0,pageNum:1,pageSize:10}},selectedUsers:[]}},created:function(){},mounted:function(){this.grid.height=this.$el.clientHeight-32},methods:{featchRoleUser:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.grid.loading=!0,e.next=3,this.$api.queryData({params:{mapperId:"com.bosssoft.monitor.dao.RoleMapper.roleUser",roleId:t.fid}});case 3:a=e.sent,r=a.data,this.grid.loading=!1,this.grid.rows=r.data;case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),featchData:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.dialog.grid.loading=!0,e.next=3,this.$api.pagingData({params:{mapperId:"com.bosssoft.monitor.dao.UserMapper.userList",pageNum:this.dialog.pagging.pageNum,pageSize:this.dialog.pagging.pageSize,userName:this.dialog.search.userName,userCode:this.dialog.search.userCode}});case 3:t=e.sent,a=t.data,this.dialog.grid.loading=!1,this.dialog.grid.rows=a.data.rows,this.dialog.pagging.total=a.data.total,this.dialog.pagging.pageNum=a.data.pageNum,this.dialog.pagging.pageSize=a.data.pageSize;case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onQuery:function(){this.dialog.pagging.pageNum=1,this.featchData()},onChangeCurrentPage:function(e){this.dialog.pagging.pageNum=e,this.featchData()},onChangePageSize:function(e){this.dialog.pagging.pageNum=1,this.dialog.pagging.pageSize=e,this.featchData()},onDialogOpen:function(){this.dialog.search.userName=null,this.dialog.search.userCode=null,this.onQuery()},validateBeforeSave:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!==this.selectedUsers.length){e.next=3;break}return this.$message.info("请选择要添加的用户！"),e.abrupt("return",Promise.reject(new Error));case 3:return e.abrupt("return",Promise.resolve());case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onSave:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.validateBeforeSave();case 3:this.$emit("addRoleUser",this.selectedUsers),e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),e.t0.message&&this.$message.error(e.t0.message);case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(){return e.apply(this,arguments)}return t}(),onDelete:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:try{this.$confirm("您确定要删除当前用户吗?","确认删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){a.$emit("removeRoleUser",[t.userId])})).catch((function(){}))}catch(r){r.message&&this.$message.error(r.message)}case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}},_=S,C=(a("bbd0"),Object(d["a"])(_,R,O,!1,null,"74526ecd",null)),D=C.exports,M={name:"PermissionIndex",components:{MenuTree:p,RoleList:$,UserList:D},data:function(){return{}},created:function(){},mounted:function(){},methods:{authorization:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.$refs["roleList"].selectedRoles.map((function(e){return e.fid})),a=this.$refs["menuTree"].$refs["menuTree"].getCheckedKeys().filter((function(e){return"-1"!==e})),0!==t.length){e.next=5;break}return this.$message.info("请选择角色！"),e.abrupt("return");case 5:return e.next=7,this.$api.add({data:{mapperId:"com.bosssoft.monitor.dao.RoleMapper.insertRoleMenu",roleIds:JSON.stringify(t),menuIds:JSON.stringify(a)}});case 7:this.$message.success("授权成功！");case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),beforeAddRoleUser:function(){var e=this.$refs["roleList"].selectedRoles;0!==e.length?this.$refs["userList"].dialog.show=!0:this.$message.info("请选择角色！")},addRoleUser:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.$refs["roleList"].selectedRoles.map((function(e){return e.fid})),a=this.$refs["userList"].selectedUsers.map((function(e){return e.userId})),e.next=4,this.$api.add({data:{mapperId:"com.bosssoft.monitor.dao.RoleMapper.insertRoleUser",roleIds:JSON.stringify(t),userIds:JSON.stringify(a)}});case 4:this.$refs["userList"].featchRoleUser(this.$refs["roleList"].selectedRoles[0]),this.$message.success("角色用户添加成功！");case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),removeRoleUser:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=this.$refs["roleList"].selectedRoles.map((function(e){return e.fid})),0!==a.length){e.next=4;break}return this.$message.info("请选择角色！"),e.abrupt("return");case 4:return e.next=6,this.$api.remove({params:{mapperId:"com.bosssoft.monitor.dao.RoleMapper.deleteRoleUser",roleIds:JSON.stringify(a),userIds:JSON.stringify(t)}});case 6:this.$refs["userList"].featchRoleUser(this.$refs["roleList"].selectedRoles[0]);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}},N=M,j=(a("867b"),Object(d["a"])(N,r,i,!1,null,"5ebab94e",null));t["default"]=j.exports},c5f6:function(e,t,a){"use strict";var r=a("7726"),i=a("69a8"),n=a("2d95"),o=a("5dbc"),s=a("6a99"),l=a("79e5"),c=a("9093").f,d=a("11e9").f,u=a("86cc").f,p=a("aa77").trim,f="Number",g=r[f],h=g,m=g.prototype,b=n(a("2aeb")(m))==f,v="trim"in String.prototype,w=function(e){var t=s(e,!1);if("string"==typeof t&&t.length>2){t=v?t.trim():p(t,3);var a,r,i,n=t.charCodeAt(0);if(43===n||45===n){if(a=t.charCodeAt(2),88===a||120===a)return NaN}else if(48===n){switch(t.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+t}for(var o,l=t.slice(2),c=0,d=l.length;c<d;c++)if(o=l.charCodeAt(c),o<48||o>i)return NaN;return parseInt(l,r)}}return+t};if(!g(" 0o1")||!g("0b1")||g("+0x1")){g=function(e){var t=arguments.length<1?0:e,a=this;return a instanceof g&&(b?l((function(){m.valueOf.call(a)})):n(a)!=f)?o(new h(w(t)),a,g):w(t)};for(var y,x=a("9e1e")?c(h):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),k=0;x.length>k;k++)i(h,y=x[k])&&!i(g,y)&&u(g,y,d(h,y));g.prototype=m,m.constructor=g,a("2aba")(r,f,g)}},c718:function(e,t,a){},eccc:function(e,t,a){},f576:function(e,t,a){"use strict";var r=a("5ca1"),i=a("2e08"),n=a("a25f"),o=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(n);r(r.P+r.F*o,"String",{padStart:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0,!0)}})},fdef:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);
//# sourceMappingURL=permission.8efece60.js.map