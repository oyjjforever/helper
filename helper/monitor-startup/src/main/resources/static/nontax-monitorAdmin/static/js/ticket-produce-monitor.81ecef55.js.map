{"version":3,"sources":["webpack:///./src/views/ticket-produce/ticket-produce-monitor.vue?ca0d","webpack:///./src/views/ticket-produce/ticket-produce-monitor.vue?87a1","webpack:///src/views/ticket-produce/ticket-produce-monitor.vue","webpack:///./src/views/ticket-produce/ticket-produce-monitor.vue?ddb0","webpack:///./src/views/ticket-produce/ticket-produce-monitor.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","directives","name","rawName","value","grid","expression","ref","attrs","rows","height","on","val","selectedRow","scopedSlots","_u","key","fn","scope","_v","_s","_f","row","createTime","staticStyle","$event","onUpdate","onView","dialog","show","$set","slot","class","dialogMode","icon","title","rules","data","mode","onSubNameChange","model","callback","$$v","_l","item","subCode","subName","thresholdLabel","label","onSave","_e","staticRenderFns","loading","typeCode","typeName","warnLevel","monitorRule","threshold","status","createBy","userName","targetSettins","computed","thresholdSettins","thresholds","push","i","created","featchData","methods","initSelectSetting","Object","assign","find","component"],"mappings":"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","file":"static/js/ticket-produce-monitor.81ecef55.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ticket-produce-monitor.vue?vue&type=style&index=0&id=3f31d8f1&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ticket-produce-monitor.vue?vue&type=style&index=0&id=3f31d8f1&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ticket-produce-monitor\"},[_c('div',{staticClass:\"grid-container\"},[_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.grid.loading),expression:\"grid.loading\"}],ref:\"table\",attrs:{\"border\":\"\",\"stripe\":\"\",\"data\":_vm.grid.rows,\"height\":_vm.grid.height,\"highlight-current-row\":\"\"},on:{\"selection-change\":function (val) { return _vm.grid.selectedRow=val; }}},[_c('el-table-column',{attrs:{\"type\":\"index\",\"width\":\"50\",\"align\":\"center\",\"label\":\"序号\"}}),_c('el-table-column',{attrs:{\"prop\":\"subName\",\"label\":\"开票情况监控指标\",\"align\":\"left\",\"show-overflow-tooltip\":\"\"}}),_c('el-table-column',{attrs:{\"width\":\"200\",\"align\":\"center\",\"prop\":\"warnLevel\",\"label\":\"预警级别\",\"show-overflow-tooltip\":\"\"}}),_c('el-table-column',{attrs:{\"prop\":\"userName\",\"label\":\"编制人\",\"align\":\"left\",\"width\":\"200\",\"show-overflow-tooltip\":\"\"}}),_c('el-table-column',{attrs:{\"width\":\"150\",\"align\":\"center\",\"label\":\"编制日期\",\"prop\":\"createTime\",\"show-overflow-tooltip\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(_vm._s(_vm._f(\"dateTime\")(scope.row.createTime,'YYYY-MM-DD')))]}}])}),_c('el-table-column',{attrs:{\"align\":\"center\",\"width\":\"100\",\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-link',{staticStyle:{\"font-size\":\"20px\",\"margin\":\"0 5px 0 0\"},attrs:{\"icon\":\"el-icon-edit-outline\"},on:{\"click\":function($event){return _vm.onUpdate(scope.row)}}}),_c('el-link',{staticStyle:{\"font-size\":\"20px\",\"margin\":\"0 5px 0 0\"},attrs:{\"icon\":\"el-icon-view\"},on:{\"click\":function($event){return _vm.onView(scope.row)}}})]}}])})],1)],1),(_vm.dialog.show)?_c('el-dialog',{directives:[{name:\"dialog\",rawName:\"v-dialog\"}],attrs:{\"width\":\"700px\",\"visible\":_vm.dialog.show,\"modal-append-to-body\":false,\"close-on-click-modal\":false},on:{\"update:visible\":function($event){return _vm.$set(_vm.dialog, \"show\", $event)}}},[_c('div',{staticClass:\"title\",attrs:{\"slot\":\"title\"},slot:\"title\"},[_c('i',{class:_vm.dialogMode.icon}),_c('span',[_vm._v(\"开票情况监控指标 —— \"+_vm._s(_vm.dialogMode.title))])]),_c('el-form',{ref:\"form\",attrs:{\"rules\":_vm.dialog.rules,\"model\":_vm.dialog.data,\"label-width\":\"110px\"}},[_c('el-row',[_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"监控指标\",\"prop\":\"subName\"}},[_c('el-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"disabled\":_vm.dialog.mode!==1},on:{\"change\":_vm.onSubNameChange},model:{value:(_vm.dialog.data.subCode),callback:function ($$v) {_vm.$set(_vm.dialog.data, \"subCode\", $$v)},expression:\"dialog.data.subCode\"}},_vm._l((_vm.targetSettins),function(item){return _c('el-option',{key:item.subCode,attrs:{\"value\":item.subCode,\"label\":item.subName}})}),1)],1)],1),_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"预警级别\",\"prop\":\"warnLevel\"}},[_c('el-radio',{attrs:{\"disabled\":\"\",\"label\":\"重要预警\"},model:{value:(_vm.dialog.data.warnLevel),callback:function ($$v) {_vm.$set(_vm.dialog.data, \"warnLevel\", $$v)},expression:\"dialog.data.warnLevel\"}},[_vm._v(\"重要预警\")]),_c('el-radio',{attrs:{\"disabled\":\"\",\"label\":\"紧急预警\"},model:{value:(_vm.dialog.data.warnLevel),callback:function ($$v) {_vm.$set(_vm.dialog.data, \"warnLevel\", $$v)},expression:\"dialog.data.warnLevel\"}},[_vm._v(\"紧急预警\")])],1)],1)],1),_c('el-row',[_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"监控规则\",\"prop\":\"monitorRule\"}},[_c('el-input',{attrs:{\"disabled\":\"\"},model:{value:(_vm.dialog.data.monitorRule),callback:function ($$v) {_vm.$set(_vm.dialog.data, \"monitorRule\", $$v)},expression:\"dialog.data.monitorRule\"}})],1)],1),_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":_vm.thresholdLabel,\"prop\":\"threshold\"}},[_c('el-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"disabled\":_vm.dialog.mode===3},model:{value:(_vm.dialog.data.threshold),callback:function ($$v) {_vm.$set(_vm.dialog.data, \"threshold\", $$v)},expression:\"dialog.data.threshold\"}},_vm._l((_vm.thresholdSettins),function(item){return _c('el-option',{key:item.value,attrs:{\"value\":item.value,\"label\":item.label}})}),1)],1)],1)],1),_c('el-row',[_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"编制人\",\"prop\":\"userName\"}},[_c('el-input',{attrs:{\"disabled\":\"\"},model:{value:(_vm.dialog.data.userName),callback:function ($$v) {_vm.$set(_vm.dialog.data, \"userName\", $$v)},expression:\"dialog.data.userName\"}})],1)],1),_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"编制时间\",\"prop\":\"createTime\"}},[_c('el-date-picker',{staticStyle:{\"width\":\"100%\"},attrs:{\"disabled\":\"\",\"type\":\"date\",\"placeholder\":\"选择日期\"},model:{value:(_vm.dialog.data.createTime),callback:function ($$v) {_vm.$set(_vm.dialog.data, \"createTime\", $$v)},expression:\"dialog.data.createTime\"}})],1)],1)],1)],1),_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[(_vm.dialog.mode !== 3)?_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"fa fa-save\"},on:{\"click\":_vm.onSave}},[_vm._v(\" 保存\")]):_vm._e()],1)],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"ticket-produce-monitor\">\r\n<!--    <div class=\"tool-bar\">-->\r\n<!--&lt;!&ndash;      <el-link icon=\"el-icon-document-add\" @click=\"onAdd\">新增</el-link>&ndash;&gt;-->\r\n<!--&lt;!&ndash;      <div class=\"split-line\"></div>&ndash;&gt;-->\r\n<!--      <el-link icon=\"el-icon-circle-check\" @click=\"toggleEnable(1)\">启用</el-link>-->\r\n<!--      <div class=\"split-line\"></div>-->\r\n<!--      <el-link icon=\"el-icon-remove-outline\" @click=\"toggleEnable(0)\">停用</el-link>-->\r\n<!--      <div class=\"split-line\"></div>-->\r\n<!--      <el-link icon=\"el-icon-refresh\" @click=\"featchData\">刷新</el-link>-->\r\n<!--    </div>-->\r\n    <div class=\"grid-container\">\r\n      <el-table\r\n        border\r\n        stripe\r\n        ref=\"table\"\r\n        :data=\"grid.rows\"\r\n        :height=\"grid.height\"\r\n        highlight-current-row\r\n        v-loading=\"grid.loading\"\r\n        @selection-change=\"val => grid.selectedRow=val\"\r\n      >\r\n        <el-table-column type=\"index\" width=\"50\" align=\"center\" label=\"序号\"></el-table-column>\r\n        <el-table-column prop=\"subName\" label=\"开票情况监控指标\" align=\"left\" show-overflow-tooltip></el-table-column>\r\n        <el-table-column\r\n          width=\"200\"\r\n          align=\"center\"\r\n          prop=\"warnLevel\"\r\n          label=\"预警级别\"\r\n          show-overflow-tooltip\r\n        ></el-table-column>\r\n        <el-table-column prop=\"userName\" label=\"编制人\" align=\"left\" width=\"200\" show-overflow-tooltip></el-table-column>\r\n        <el-table-column\r\n          width=\"150\"\r\n          align=\"center\"\r\n          label=\"编制日期\"\r\n          prop=\"createTime\"\r\n          show-overflow-tooltip\r\n        >\r\n          <template slot-scope=\"scope\">{{scope.row.createTime | dateTime('YYYY-MM-DD')}}</template>\r\n        </el-table-column>\r\n<!--        <el-table-column width=\"100\" align=\"center\" prop=\"status\" label=\"状态\" show-overflow-tooltip>-->\r\n<!--          <template slot-scope=\"scope\">-->\r\n<!--            <el-tag v-if=\"scope.row.status === 1\" type=\"success\">启用</el-tag>-->\r\n<!--            <el-tag v-else type=\"danger\">停用</el-tag>-->\r\n<!--          </template>-->\r\n<!--        </el-table-column>-->\r\n        <el-table-column align=\"center\" width=\"100\" label=\"操作\">\r\n          <template slot-scope=\"scope\">\r\n            <el-link\r\n              style=\"font-size: 20px;margin: 0 5px 0 0;\"\r\n              icon=\"el-icon-edit-outline\"\r\n              @click=\"onUpdate(scope.row)\"\r\n            ></el-link>\r\n            <el-link\r\n              style=\"font-size: 20px;margin: 0 5px 0 0;\"\r\n              icon=\"el-icon-view\"\r\n              @click=\"onView(scope.row)\"\r\n            ></el-link>\r\n            <!--            <el-link-->\r\n            <!--              style=\"font-size: 20px;margin: 0 5px 0 0;\"-->\r\n            <!--              icon=\"el-icon-delete\"-->\r\n            <!--              @click=\"onDelete(scope.row)\"-->\r\n            <!--            ></el-link>-->\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n    </div>\r\n    <el-dialog\r\n      v-dialog\r\n      width=\"700px\"\r\n      v-if=\"dialog.show\"\r\n      :visible.sync=\"dialog.show\"\r\n      :modal-append-to-body=\"false\"\r\n      :close-on-click-modal=\"false\"\r\n    >\r\n      <div slot=\"title\" class=\"title\">\r\n        <i :class=\"dialogMode.icon\"></i>\r\n        <span>开票情况监控指标 —— {{dialogMode.title}}</span>\r\n      </div>\r\n      <el-form ref=\"form\" :rules=\"dialog.rules\" :model=\"dialog.data\" label-width=\"110px\">\r\n        <el-row>\r\n          <el-col :span=\"12\">\r\n            <el-form-item label=\"监控指标\" prop=\"subName\">\r\n              <el-select @change=\"onSubNameChange\" :disabled=\"dialog.mode!==1\" v-model=\"dialog.data.subCode\" style=\"width: 100%;\">\r\n                <el-option v-for=\"item in targetSettins\" :key=\"item.subCode\" :value=\"item.subCode\" :label=\"item.subName\"></el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"12\">\r\n            <el-form-item label=\"预警级别\" prop=\"warnLevel\">\r\n              <el-radio disabled v-model=\"dialog.data.warnLevel\" label=\"重要预警\">重要预警</el-radio>\r\n              <el-radio disabled v-model=\"dialog.data.warnLevel\" label=\"紧急预警\">紧急预警</el-radio>\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n        <el-row>\r\n          <el-col :span=\"12\">\r\n            <el-form-item label=\"监控规则\" prop=\"monitorRule\">\r\n              <el-input disabled v-model=\"dialog.data.monitorRule\"></el-input>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"12\">\r\n            <el-form-item :label=\"thresholdLabel\" prop=\"threshold\">\r\n              <el-select :disabled=\"dialog.mode===3\" v-model=\"dialog.data.threshold\" style=\"width: 100%;\">\r\n                <el-option v-for=\"item in thresholdSettins\" :key=\"item.value\" :value=\"item.value\" :label=\"item.label\"></el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n        <el-row>\r\n          <el-col :span=\"12\">\r\n            <el-form-item label=\"编制人\" prop=\"userName\">\r\n              <el-input disabled v-model=\"dialog.data.userName\"></el-input>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"12\">\r\n            <el-form-item label=\"编制时间\" prop=\"createTime\">\r\n              <el-date-picker\r\n                disabled\r\n                v-model=\"dialog.data.createTime\"\r\n                type=\"date\"\r\n                placeholder=\"选择日期\"\r\n                style=\"width: 100%;\"\r\n              ></el-date-picker>\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n      </el-form>\r\n      <div slot=\"footer\">\r\n        <el-button type=\"primary\" @click=\"onSave\" icon=\"fa fa-save\" v-if=\"dialog.mode !== 3\">&nbsp;保存</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport moment from 'moment'\r\nexport default {\r\n  name: 'ticket-produce-monitor',\r\n  data () {\r\n    return {\r\n      grid: {\r\n        rows: [],\r\n        height: null,\r\n        loading: false,\r\n        selectedRow: []\r\n      },\r\n      dialog: {\r\n        mode: null,\r\n        show: false,\r\n        data: {\r\n          typeCode: null,\r\n          typeName: null,\r\n          subName: null,\r\n          warnLevel: null,\r\n          monitorRule: '>',\r\n          threshold: null,\r\n          status: null,\r\n          createBy: null,\r\n          userName: null,\r\n          createTime: null\r\n        },\r\n        rules: {\r\n          subName: [\r\n            { required: true, message: '请选择监控指标！' }\r\n          ],\r\n          threshold: [\r\n            { required: true, message: '请输入数值！' }\r\n          ]\r\n        }\r\n      },\r\n      targetSettins: [{\r\n        subName: '接口开票连续失败次数',\r\n        subCode: '001'\r\n      }, {\r\n        subName: '开票耗时/平均耗时',\r\n        subCode: '002'\r\n      }, {\r\n        subName: '制票失败率',\r\n        subCode: '003'\r\n      }, {\r\n        subName: '制票异常笔数/开票笔数',\r\n        subCode: '004'\r\n      }]\r\n    }\r\n  },\r\n  computed: {\r\n    dialogMode () {\r\n      switch (this.dialog.mode) {\r\n        case 1:\r\n          return { title: '新增', icon: 'el-icon-document-add', message: '添加成功！' }\r\n        case 2:\r\n          return { title: '编辑', icon: 'el-icon-edit-outline', message: '修改成功！' }\r\n        case 3:\r\n          return { title: '查看', icon: 'el-icon-document' }\r\n        default:\r\n          return {}\r\n      }\r\n    },\r\n    thresholdSettins () {\r\n      let thresholds = []\r\n      switch (this.dialog.data.subCode) {\r\n        case '001':\r\n          for (let i = 1; i < 21; i++) {\r\n            thresholds.push({\r\n              value: i + '',\r\n              label: i + ''\r\n            })\r\n          }\r\n          return thresholds\r\n        case '002':\r\n          for (let i = 1; i < 6; i++) {\r\n            thresholds.push({\r\n              value: i + '',\r\n              label: i + ''\r\n            })\r\n          }\r\n          return thresholds\r\n        case '003':\r\n          for (let i = 1; i < 11; i++) {\r\n            thresholds.push({\r\n              value: i + '',\r\n              label: i + '.0%'\r\n            })\r\n          }\r\n          return thresholds\r\n        case '004':\r\n          return [{\r\n            value: '1.0',\r\n            label: '1.0'\r\n          }, {\r\n            value: '1.1',\r\n            label: '1.1'\r\n          }, {\r\n            value: '1.2',\r\n            label: '1.2'\r\n          }, {\r\n            value: '1.3',\r\n            label: '1.3'\r\n          }]\r\n        default:\r\n          return []\r\n      }\r\n    },\r\n    thresholdLabel () {\r\n      switch (this.dialog.data.subCode) {\r\n        case '001':\r\n          return '次数'\r\n        case '002':\r\n        case '003':\r\n        case '004':\r\n          return '比例'\r\n        default:\r\n          return '数值'\r\n      }\r\n    }\r\n\r\n  },\r\n  created () {\r\n    this.featchData()\r\n  },\r\n  methods: {\r\n    initSelectSetting () {\r\n\r\n    },\r\n    /**\r\n     获取 主页面表格数据\r\n     */\r\n    async featchData () {\r\n      this.grid.loading = true\r\n      let { data } = await this.$api.queryData({\r\n        params: {\r\n          mapperId: 'com.bosssoft.monitor.dao.ThresholdMapper.thresholds',\r\n          typeCode: '11'\r\n          // appId: $store.state.system.appId\r\n        }\r\n      })\r\n      this.grid.loading = false\r\n      this.grid.rows = data.data\r\n    },\r\n    /**\r\n     新增对话框 初始化\r\n     */\r\n    async onAdd () {\r\n      try {\r\n        // await this.validateBeforeAdd()\r\n        let model = {\r\n          typeCode: '11',\r\n          typeName: '开票情况',\r\n          monitorRule: '>',\r\n          threshold: null,\r\n          createBy: this.$store.state.user.userInfo.userId,\r\n          userName: this.$store.state.user.userInfo.userName,\r\n          createTime: moment().format('YYYY-MM-DD HH:mm:ss')\r\n        }\r\n        this.dialog.mode = 1\r\n        this.dialog.show = true\r\n        this.dialog.data = model\r\n      } catch (error) {\r\n        error.message && this.$message.error(error.message)\r\n      }\r\n    },\r\n    /**\r\n     查看对话框 初始化\r\n     */\r\n    onView (row) {\r\n      this.dialog.mode = 3\r\n      this.dialog.show = true\r\n      this.dialog.data = Object.assign({}, row)\r\n    },\r\n    /**\r\n     删除前 校验\r\n     */\r\n    async validateBeforeDelete (row) {\r\n      if (row.status === 1) {\r\n        this.$message.info('当前指标已启用，不允许删除！')\r\n        return Promise.reject(new Error())\r\n      }\r\n      return Promise.resolve()\r\n    },\r\n    /**\r\n     删除 操作\r\n     */\r\n    async onDelete (row) {\r\n      try {\r\n        await this.validateBeforeDelete(row)\r\n        this.$confirm('您确定要删除当前选中的记录吗?', '确认删除', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n        }).then(async () => {\r\n          await this.$api.remove({\r\n            params: {\r\n              mapperId: 'com.bosssoft.monitor.dao.ThresholdMapper.deleteByPrimaryKey',\r\n              fid: row.fid\r\n            }\r\n          })\r\n          this.featchData()\r\n          this.$message.success('删除成功！')\r\n        }).catch(() => { })\r\n      } catch (error) {\r\n        error.message && this.$message.error(error.message)\r\n      }\r\n    },\r\n    /**\r\n     更新对话框弹出前 校验\r\n     */\r\n    async validateBeforeUpdate (row) {\r\n      if (row.status === 1) {\r\n        this.$message.info('当前指标已启用，不允许编辑！')\r\n        return Promise.reject(new Error())\r\n      }\r\n      return Promise.resolve()\r\n    },\r\n    /**\r\n     更新对话框 初始化\r\n     */\r\n    async onUpdate (row) {\r\n      try {\r\n        // await this.validateBeforeUpdate(row)\r\n        this.dialog.mode = 2\r\n        this.dialog.show = true\r\n        this.dialog.data = Object.assign({}, row)\r\n      } catch (error) {\r\n        error.message && this.$message.error(error.message)\r\n      }\r\n    },\r\n    /**\r\n     保存前 校验\r\n     */\r\n    async validateBeforeSave () {\r\n      await this.$refs['form'].validate()\r\n      if (this.dialog.mode === 1) {\r\n        // 新增保存前校验\r\n        let { data } = await this.$api.queryData({\r\n          params: {\r\n            mapperId: 'com.bosssoft.monitor.dao.ThresholdMapper.isExists',\r\n            isList: false,\r\n            typeCode: '11',\r\n            subCode: this.dialog.data.subCode\r\n          }\r\n        })\r\n        if (data.data.count > 0) {\r\n          this.$message.info(`当前已存在启用的{${this.dialog.data.subName}}指标，不允许新增！`)\r\n          return Promise.reject(new Error())\r\n        }\r\n      }\r\n      if (this.dialog.mode === 2) {\r\n        // 编辑保存前校验\r\n      }\r\n      return Promise.resolve()\r\n    },\r\n    /**\r\n     （新增 mode=1、更新 mode=2）保存 操作\r\n     */\r\n    async onSave () {\r\n      try {\r\n        await this.validateBeforeSave()\r\n        new Promise(async (resolve) => {\r\n          if (this.dialog.mode === 1) {\r\n            this.$confirm('是否立即启用该指标?', '启用确认', {\r\n              confirmButtonText: '是',\r\n              cancelButtonText: '否',\r\n              type: 'info'\r\n            }).then(() => {\r\n              this.dialog.data.status = 1\r\n            }).catch(() => {\r\n              this.dialog.data.status = 0\r\n            }).then(async () => {\r\n              await this.$api.add({\r\n                data: {\r\n                  mapperId: 'com.bosssoft.monitor.dao.ThresholdMapper.insertSelective',\r\n                  ...this.dialog.data\r\n                }\r\n              })\r\n              resolve()\r\n            })\r\n          } else {\r\n            let model = this.dialog.data\r\n            await this.$api.modify({\r\n              data: {\r\n                mapperId: 'com.bosssoft.monitor.dao.ThresholdMapper.updateByPrimaryKeySelective',\r\n                fid: model.fid,\r\n                threshold: model.threshold\r\n              }\r\n            })\r\n            resolve()\r\n          }\r\n        }).then(() => {\r\n          this.featchData()\r\n          this.dialog.show = false\r\n          this.$message.success(this.dialogMode.message)\r\n        })\r\n      } catch (error) {\r\n        error.message && this.$message.error(error.message)\r\n      }\r\n    },\r\n    /**\r\n     启用 停用 操作\r\n     */\r\n    async toggleEnable (status) {\r\n      if (this.grid.selectedRow.length === 0) {\r\n        this.$message.info('请选择指标！')\r\n        return\r\n      }\r\n      await this.$api.modify({\r\n        data: {\r\n          mapperId: 'com.bosssoft.monitor.dao.ThresholdMapper.toggleEnable',\r\n          status,\r\n          ids: JSON.stringify(this.grid.selectedRow.map(item => item.fid))\r\n        }\r\n      })\r\n      this.featchData()\r\n    },\r\n    /**\r\n     指标选择后 事件\r\n     */\r\n    onSubNameChange (subCode) {\r\n      if (subCode === '001') {\r\n        this.dialog.data.warnLevel = '紧急预警'\r\n        // 默认值\r\n        this.dialog.data.threshold = '5'\r\n      } else if (subCode === '002') {\r\n        this.dialog.data.warnLevel = '紧急预警'\r\n        // 默认值\r\n        this.dialog.data.threshold = '2'\r\n      } else if (subCode === '003') {\r\n        this.dialog.data.warnLevel = '重要预警'\r\n        // 默认值\r\n        this.dialog.data.threshold = '5'\r\n      } else if (subCode === '004') {\r\n        this.dialog.data.warnLevel = '重要预警'\r\n        // 默认值\r\n        this.dialog.data.threshold = '1.1'\r\n      }\r\n      this.dialog.data.subName = this.targetSettins.find(item => item.subCode === subCode).subName\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n  .ticket-produce-monitor {\r\n    width: 100%;\r\n    height: 100%;\r\n    display: flex;\r\n    flex-direction: column;\r\n\r\n    .grid-container {\r\n      flex: 1;\r\n    }\r\n  }\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ticket-produce-monitor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ticket-produce-monitor.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ticket-produce-monitor.vue?vue&type=template&id=3f31d8f1&scoped=true&\"\nimport script from \"./ticket-produce-monitor.vue?vue&type=script&lang=js&\"\nexport * from \"./ticket-produce-monitor.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ticket-produce-monitor.vue?vue&type=style&index=0&id=3f31d8f1&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3f31d8f1\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}