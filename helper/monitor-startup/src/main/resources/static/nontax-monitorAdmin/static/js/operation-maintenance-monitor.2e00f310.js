(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["operation-maintenance-monitor"],{"5dbc":function(e,t,a){var r=a("d3f4"),o=a("8b97").set;e.exports=function(e,t,a){var i,n=t.constructor;return n!==a&&"function"==typeof n&&(i=n.prototype)!==a.prototype&&r(i)&&o&&o(e,i),e}},"7ccf":function(e,t,a){"use strict";var r=a("f8ad"),o=a.n(r);o.a},"8b97":function(e,t,a){var r=a("d3f4"),o=a("cb7c"),i=function(e,t){if(o(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{r=a("9b43")(Function.call,a("11e9").f(Object.prototype,"__proto__").set,2),r(e,[]),t=!(e instanceof Array)}catch(o){t=!0}return function(e,a){return i(e,a),t?e.__proto__=a:r(e,a),e}}({},!1):void 0),check:i}},aa77:function(e,t,a){var r=a("5ca1"),o=a("be13"),i=a("79e5"),n=a("fdef"),l="["+n+"]",s="​",d=RegExp("^"+l+l+"*"),u=RegExp(l+l+"*$"),c=function(e,t,a){var o={},l=i((function(){return!!n[e]()||s[e]()!=s})),d=o[e]=l?t(h):n[e];a&&(o[a]=d),r(r.P+r.F*l,"String",o)},h=c.trim=function(e,t){return e=String(o(e)),1&t&&(e=e.replace(d,"")),2&t&&(e=e.replace(u,"")),e};e.exports=c},c5f6:function(e,t,a){"use strict";var r=a("7726"),o=a("69a8"),i=a("2d95"),n=a("5dbc"),l=a("6a99"),s=a("79e5"),d=a("9093").f,u=a("11e9").f,c=a("86cc").f,h=a("aa77").trim,f="Number",p=r[f],m=p,g=p.prototype,b=i(a("2aeb")(g))==f,v="trim"in String.prototype,w=function(e){var t=l(e,!1);if("string"==typeof t&&t.length>2){t=v?t.trim():h(t,3);var a,r,o,i=t.charCodeAt(0);if(43===i||45===i){if(a=t.charCodeAt(2),88===a||120===a)return NaN}else if(48===i){switch(t.charCodeAt(1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+t}for(var n,s=t.slice(2),d=0,u=s.length;d<u;d++)if(n=s.charCodeAt(d),n<48||n>o)return NaN;return parseInt(s,r)}}return+t};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(e){var t=arguments.length<1?0:e,a=this;return a instanceof p&&(b?s((function(){g.valueOf.call(a)})):i(a)!=f)?n(new m(w(t)),a,p):w(t)};for(var y,x=a("9e1e")?d(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),N=0;x.length>N;N++)o(m,y=x[N])&&!o(p,y)&&c(p,y,u(m,y));p.prototype=g,g.constructor=p,a("2aba")(r,f,p)}},f8ad:function(e,t,a){},fdef:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},fe9d:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"operation-maintenance-monitor"},[a("div",{staticClass:"grid-container"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.grid.loading,expression:"grid.loading"}],ref:"table",attrs:{border:"",stripe:"",data:e.grid.rows,height:e.grid.height,"highlight-current-row":""},on:{"selection-change":function(t){return e.grid.selectedRow=t}}},[a("el-table-column",{attrs:{type:"index",width:"50",align:"center",label:"序号"}}),a("el-table-column",{attrs:{prop:"typeName",label:"运维监控参数",align:"left","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{width:"200",align:"left",prop:"frequency",formatter:e.formatFrequency,label:"采集频率","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{width:"200",align:"left",prop:"threshold",formatter:e.formatThreshold,label:"报警阈值","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{width:"200",align:"left",prop:"maxDuration",formatter:e.formatMaxDuration,label:"报警未处理最大时长","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"userName",label:"编制人",align:"left",width:"200","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{width:"150",align:"center",label:"编制日期",prop:"createTime","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("dateTime")(t.row.createTime,"YYYY-MM-DD")))]}}])}),a("el-table-column",{attrs:{align:"center",width:"100",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{staticStyle:{"font-size":"20px",margin:"0 5px 0 0"},attrs:{icon:"el-icon-edit-outline"},on:{click:function(a){return e.onUpdate(t.row)}}}),a("el-link",{staticStyle:{"font-size":"20px",margin:"0 5px 0 0"},attrs:{icon:"el-icon-view"},on:{click:function(a){return e.onView(t.row)}}})]}}])})],1)],1),e.dialog.show?a("el-dialog",{directives:[{name:"dialog",rawName:"v-dialog"}],attrs:{width:"700px",visible:e.dialog.show,"modal-append-to-body":!1,"close-on-click-modal":!1},on:{"update:visible":function(t){return e.$set(e.dialog,"show",t)}}},[a("div",{staticClass:"title",attrs:{slot:"title"},slot:"title"},[a("i",{class:e.dialogMode.icon}),a("span",[e._v("运维监控参数 —— "+e._s(e.dialogMode.title))])]),a("el-form",{ref:"form",attrs:{rules:e.dialog.rules,model:e.dialog.data,"label-width":"110px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"参数类型",prop:"subName"}},[a("el-input",{attrs:{disabled:""},model:{value:e.dialog.data.typeName,callback:function(t){e.$set(e.dialog.data,"typeName",t)},expression:"dialog.data.typeName"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"采集频率",prop:"threshold0","label-width":"130px"}},[a("el-input",{attrs:{disabled:3===e.dialog.mode||"无"===e.dialog.data.threshold0},model:{value:e.dialog.data.threshold0,callback:function(t){e.$set(e.dialog.data,"threshold0",t)},expression:"dialog.data.threshold0"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"单位",prop:"unit0"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:3===e.dialog.mode},model:{value:e.dialog.data.unit0,callback:function(t){e.$set(e.dialog.data,"unit0",t)},expression:"dialog.data.unit0"}},e._l(e.units,(function(e){return a("el-option",{key:e.value,attrs:{value:e.value,label:e.label}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"报警阈值",prop:"threshold1","label-width":"130px"}},[a("el-input",{attrs:{disabled:3===e.dialog.mode||"无"===e.dialog.data.threshold1},model:{value:e.dialog.data.threshold1,callback:function(t){e.$set(e.dialog.data,"threshold1",t)},expression:"dialog.data.threshold1"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"单位",prop:"unit1"}},[a("el-input",{attrs:{disabled:""},model:{value:e.dialog.data.unit1,callback:function(t){e.$set(e.dialog.data,"unit1",t)},expression:"dialog.data.unit1"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"未处理最大时长",prop:"threshold2","label-width":"130px"}},[a("el-input",{attrs:{disabled:3===e.dialog.mode||"无"===e.dialog.data.threshold2},model:{value:e.dialog.data.threshold2,callback:function(t){e.$set(e.dialog.data,"threshold2",t)},expression:"dialog.data.threshold2"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"单位",prop:"unit2"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:3===e.dialog.mode},model:{value:e.dialog.data.unit2,callback:function(t){e.$set(e.dialog.data,"unit2",t)},expression:"dialog.data.unit2"}},e._l(e.units,(function(e){return a("el-option",{key:e.value,attrs:{value:e.value,label:e.label}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"编制人",prop:"userName"}},[a("el-input",{attrs:{disabled:""},model:{value:e.dialog.data.userName,callback:function(t){e.$set(e.dialog.data,"userName",t)},expression:"dialog.data.userName"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"编制时间",prop:"createTime"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{disabled:"",type:"date",placeholder:"选择日期"},model:{value:e.dialog.data.createTime,callback:function(t){e.$set(e.dialog.data,"createTime",t)},expression:"dialog.data.createTime"}})],1)],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[3!==e.dialog.mode?a("el-button",{attrs:{type:"primary",icon:"fa fa-save"},on:{click:e.onSave}},[e._v(" 保存")]):e._e()],1)],1):e._e()],1)},o=[],i=(a("8e6e"),a("456d"),a("bd86")),n=(a("c5f6"),a("ac6a"),a("96cf"),a("3b8d"));function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(a,!0).forEach((function(t){Object(i["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var d={name:"operation-maintenance-monitor",data:function(){var e=function(e,t,a){t||0===t?/^(-?\d+)$/.test(t)?t<=0?a("请输入大于0的整数！"):a():a("请输入整数！"):a("请输入阈值！")},t=function(e,t,a){t||0===t?/^(-?\d+)$/.test(t)?t<=0?a("请输入大于0的整数！"):t>100?a("请输入小于100的整数！"):a():a("请输入整数！"):a("请输入阈值！")};return{grid:{rows:[],height:null,loading:!1,selectedRow:[]},dialog:{mode:null,show:!1,data:[],rules:{threshold0:[{required:!0,validator:e,trigger:"blur"}],threshold1:[{required:!0,validator:t,trigger:"blur"}],threshold2:[{required:!0,validator:e,trigger:"blur"}]}},units:[{label:"小时",value:"1"},{label:"分钟",value:"2"},{label:"秒",value:"3"}]}},computed:{dialogMode:function(){switch(this.dialog.mode){case 1:return{title:"新增",icon:"el-icon-document-add",message:"添加成功！"};case 2:return{title:"编辑",icon:"el-icon-edit-outline",message:"修改成功！"};case 3:return{title:"查看",icon:"el-icon-document"};default:return{}}}},created:function(){this.featchData()},methods:{formatTime:function(e,t){return"无"===e?"无":"1"===t?e/3600+"(小时)":"2"===t?e/60+"(分钟)":"3"===t?e+"(秒)":e+"%"},formatFrequency:function(e){return e.threshold0||(e.threshold0="无"),this.formatTime(e.threshold0,e.unit0)},formatThreshold:function(e,t){return e.threshold1||(e.threshold1="无"),this.formatTime(e.threshold1,e.unit1)},formatMaxDuration:function(e){return e.threshold2||(e.threshold2="无"),this.formatTime(e.threshold2,e.unit2)},featchData:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,a,r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.grid.loading=!0,e.next=3,this.$api.queryData({params:{mapperId:"com.bosssoft.monitor.dao.ThresholdMapper.groupThresholds",typeCodes:JSON.stringify(["01","02","03","05","06","07","08"])}});case 3:t=e.sent,a=t.data,this.grid.loading=!1,a.data.forEach((function(e){1===e.status&&(e.status=!0)})),r=[],a.data.forEach((function(e,t){o=Number(e.typeCode),o>3&&o--,r[o]||(r[o]={typeName:null,typeCode:null,thresholds:[],createTime:null,userName:null}),r[o].typeName=e.typeName,r[o].typeCode=e.typeCode,r[o].createTime=e.createTime,r[o].userName=e.userName,r[o]["subCode"+(Number(e.subCode)-1)]=e.subCode,r[o]["subName"+(Number(e.subCode)-1)]=e.subName,r[o]["threshold"+(Number(e.subCode)-1)]=e.threshold,r[o]["unit"+(Number(e.subCode)-1)]=e.unit,r[o].unit1="%"})),this.grid.rows=r;case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),validateNumeric:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,a,r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=/^(-?\d+)$/,a=[],a.push({threshold:this.dialog.data.threshold0,unit:this.dialog.data.unit0},{threshold:this.dialog.data.threshold1,unit:this.dialog.data.unit1},{threshold:this.dialog.data.threshold2,unit:this.dialog.data.unit2}),r=0;case 4:if(!(r<3)){e.next=18;break}if(o=a[r],"无"===o.threshold||t.test(o.threshold)){e.next=9;break}return this.$message.info("指标阈值必须为整数！"),e.abrupt("return",Promise.reject(new Error));case 9:if(!("无"!==o.threshold&&o.threshold<0)){e.next=12;break}return this.$message.info("指标阈值不能＜0！"),e.abrupt("return",Promise.reject(new Error));case 12:if(o.unit){e.next=15;break}return this.$message.info("必须选择单位！"),e.abrupt("return",Promise.reject(new Error));case 15:r++,e.next=4;break;case 18:if(!("无"!==this.dialog.data.threshold1&&this.dialog.data.threshold1>100)){e.next=21;break}return this.$message.info("指标阈值必须＜100%！"),e.abrupt("return",Promise.reject(new Error));case 21:return e.abrupt("return",Promise.resolve());case 22:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onView:function(e){this.dialog.mode=3,this.dialog.show=!0,this.dialog.data=Object.assign({},e)},onUpdate:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:try{this.dialog.mode=2,this.dialog.show=!0,this.dialog.data=Object.assign({},t),this.dialog.data.threshold0=this.transformSecond(this.dialog.data.threshold0,this.dialog.data.unit0,0),this.dialog.data.threshold2=this.transformSecond(this.dialog.data.threshold2,this.dialog.data.unit2,0)}catch(a){a.message&&this.$message.error(a.message)}case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),validateBeforeSave:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$refs["form"].validate();case 2:return e.next=4,this.validateNumeric();case 4:return this.dialog.mode,e.abrupt("return",Promise.resolve());case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),transformSecond:function(e,t,a){if("无"===e)return null;if(1===a){if("1"===t)return 3600*e;if("2"===t)return 60*e;if("3"===t)return e}else{if("1"===t)return e/3600;if("2"===t)return e/60;if("3"===t)return e}},onSave:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.validateBeforeSave();case 3:return this.dialog.loading=!0,t=this.dialog.data,t.threshold0=this.transformSecond(t.threshold0,t.unit0,1),t.unit1="",t.threshold2=this.transformSecond(t.threshold2,t.unit2,1),e.next=10,this.$api.modify({data:s({mapperId:"com.bosssoft.monitor.dao.ThresholdMapper.batchUpdateByPrimaryKeySelective"},t)});case 10:this.dialog.loading=!1,this.featchData(),this.dialog.show=!1,this.$message.success(this.dialogMode.message),e.next=19;break;case 16:e.prev=16,e.t0=e["catch"](0),e.t0.message&&this.$message.error(e.t0.message);case 19:case"end":return e.stop()}}),e,this,[[0,16]])})));function t(){return e.apply(this,arguments)}return t}()}},u=d,c=(a("7ccf"),a("2877")),h=Object(c["a"])(u,r,o,!1,null,"9b1dfa4c",null);t["default"]=h.exports}}]);
//# sourceMappingURL=operation-maintenance-monitor.2e00f310.js.map